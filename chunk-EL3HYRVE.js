import{$ as Ei,$a as te,A as Si,Ba as k,C as Ri,Ca as kt,Da as zi,Db as Gi,E as Di,Fa as I,Fb as Xi,Ga as M,Ha as Ct,K as Ee,L as Pt,La as Kt,M as nt,Ma as G,N as Ii,Na as X,Oa as Te,P as w,Pa as Jt,Qa as lt,R as Z,Ra as ht,S as qt,Sa as H,T as d,Ta as v,Ua as _,Va as $,W as wt,Wa as Oe,Xa as N,Y as b,Ya as T,Z as x,Za as g,_ as Pi,_a as Qt,a as W,aa as q,ab as ee,b as st,ba as A,bb as bt,c as J,cb as Me,db as rt,e as It,eb as Li,fa as K,fb as xt,gb as Fi,h as u,ha as ut,hb as ie,i as yi,ia as ke,ib as se,j as De,ja as L,jb as $e,la as ki,m as wi,na as Ti,nb as Tt,oa as Oi,pb as Ot,q as Ci,qb as Ni,ra as Mi,rb as re,sa as y,ua as Q,v as bi,va as at,vb as Bi,w as xi,wa as F,wb as Ai,x as Ie,xa as Et,xb as Hi,y as Zt,ya as $i,yb as Vi,z as Pe,zb as Wi}from"./chunk-WN4USTYE.js";var Ui=["*"];function or(r,t){if(r&1&&$(0,"div",0),r&2){let e=t.$index,i=g();H("ngStyle",i.gridRenderer.getGridColumnStyle(e))}}function nr(r,t){if(r&1&&$(0,"div",1),r&2){let e=t.$index,i=g();H("ngStyle",i.gridRenderer.getGridRowStyle(e))}}function ar(r,t){if(r&1){let e=N();v(0,"div",8),T("mousedown",function(s){b(e);let o=g();return x(o.resize.dragStartDelay(s))})("touchstart",function(s){b(e);let o=g();return x(o.resize.dragStartDelay(s))}),_()}}function lr(r,t){if(r&1){let e=N();v(0,"div",9),T("mousedown",function(s){b(e);let o=g();return x(o.resize.dragStartDelay(s))})("touchstart",function(s){b(e);let o=g();return x(o.resize.dragStartDelay(s))}),_()}}function hr(r,t){if(r&1){let e=N();v(0,"div",10),T("mousedown",function(s){b(e);let o=g();return x(o.resize.dragStartDelay(s))})("touchstart",function(s){b(e);let o=g();return x(o.resize.dragStartDelay(s))}),_()}}function cr(r,t){if(r&1){let e=N();v(0,"div",11),T("mousedown",function(s){b(e);let o=g();return x(o.resize.dragStartDelay(s))})("touchstart",function(s){b(e);let o=g();return x(o.resize.dragStartDelay(s))}),_()}}function dr(r,t){if(r&1){let e=N();v(0,"div",12),T("mousedown",function(s){b(e);let o=g();return x(o.resize.dragStartDelay(s))})("touchstart",function(s){b(e);let o=g();return x(o.resize.dragStartDelay(s))}),_()}}function pr(r,t){if(r&1){let e=N();v(0,"div",13),T("mousedown",function(s){b(e);let o=g();return x(o.resize.dragStartDelay(s))})("touchstart",function(s){b(e);let o=g();return x(o.resize.dragStartDelay(s))}),_()}}function ur(r,t){if(r&1){let e=N();v(0,"div",14),T("mousedown",function(s){b(e);let o=g();return x(o.resize.dragStartDelay(s))})("touchstart",function(s){b(e);let o=g();return x(o.resize.dragStartDelay(s))}),_()}}function gr(r,t){if(r&1){let e=N();v(0,"div",15),T("mousedown",function(s){b(e);let o=g();return x(o.resize.dragStartDelay(s))})("touchstart",function(s){b(e);let o=g();return x(o.resize.dragStartDelay(s))}),_()}}var m=function(r){return r.Fit="fit",r.ScrollVertical="scrollVertical",r.ScrollHorizontal="scrollHorizontal",r.Fixed="fixed",r.VerticalFixed="verticalFixed",r.HorizontalFixed="horizontalFixed",r}(m||{}),Zi=function(r){return r.Always="always",r.OnDragAndResize="onDrag&Resize",r.None="none",r}(Zi||{}),C=function(r){return r.None="none",r.CompactUp="compactUp",r.CompactLeft="compactLeft",r.CompactUpAndLeft="compactUp&Left",r.CompactLeftAndUp="compactLeft&Up",r.CompactRight="compactRight",r.CompactUpAndRight="compactUp&Right",r.CompactRightAndUp="compactRight&Up",r.CompactDown="compactDown",r.CompactDownAndLeft="compactDown&Left",r.CompactLeftAndDown="compactLeft&Down",r.CompactDownAndRight="compactDown&Right",r.CompactRightAndDown="compactRight&Down",r}(C||{}),O=function(r){return r.LTR="ltr",r.RTL="rtl",r}(O||{}),ze=class{gridster;constructor(t){this.gridster=t}destroy(){this.gridster=null}checkCompact(){this.gridster.$options.compactType!==C.None&&(this.gridster.$options.compactType===C.CompactUp?this.checkCompactMovement("y",-1):this.gridster.$options.compactType===C.CompactLeft?this.checkCompactMovement("x",-1):this.gridster.$options.compactType===C.CompactUpAndLeft?(this.checkCompactMovement("y",-1),this.checkCompactMovement("x",-1)):this.gridster.$options.compactType===C.CompactLeftAndUp?(this.checkCompactMovement("x",-1),this.checkCompactMovement("y",-1)):this.gridster.$options.compactType===C.CompactRight?this.checkCompactMovement("x",1):this.gridster.$options.compactType===C.CompactUpAndRight?(this.checkCompactMovement("y",-1),this.checkCompactMovement("x",1)):this.gridster.$options.compactType===C.CompactRightAndUp?(this.checkCompactMovement("x",1),this.checkCompactMovement("y",-1)):this.gridster.$options.compactType===C.CompactDown?this.checkCompactMovement("y",1):this.gridster.$options.compactType===C.CompactDownAndLeft?(this.checkCompactMovement("y",1),this.checkCompactMovement("x",-1)):this.gridster.$options.compactType===C.CompactDownAndRight?(this.checkCompactMovement("y",1),this.checkCompactMovement("x",1)):this.gridster.$options.compactType===C.CompactLeftAndDown?(this.checkCompactMovement("x",-1),this.checkCompactMovement("y",1)):this.gridster.$options.compactType===C.CompactRightAndDown&&(this.checkCompactMovement("x",1),this.checkCompactMovement("y",1)))}checkCompactItem(t){this.gridster.$options.compactType!==C.None&&(this.gridster.$options.compactType===C.CompactUp?this.moveTillCollision(t,"y",-1):this.gridster.$options.compactType===C.CompactLeft?this.moveTillCollision(t,"x",-1):this.gridster.$options.compactType===C.CompactUpAndLeft?(this.moveTillCollision(t,"y",-1),this.moveTillCollision(t,"x",-1)):this.gridster.$options.compactType===C.CompactLeftAndUp?(this.moveTillCollision(t,"x",-1),this.moveTillCollision(t,"y",-1)):this.gridster.$options.compactType===C.CompactUpAndRight?(this.moveTillCollision(t,"y",-1),this.moveTillCollision(t,"x",1)):this.gridster.$options.compactType===C.CompactDown?this.moveTillCollision(t,"y",1):this.gridster.$options.compactType===C.CompactDownAndLeft?(this.moveTillCollision(t,"y",1),this.moveTillCollision(t,"x",-1)):this.gridster.$options.compactType===C.CompactLeftAndDown?(this.moveTillCollision(t,"x",-1),this.moveTillCollision(t,"y",1)):this.gridster.$options.compactType===C.CompactDownAndRight?(this.moveTillCollision(t,"y",1),this.moveTillCollision(t,"x",1)):this.gridster.$options.compactType===C.CompactRightAndDown&&(this.moveTillCollision(t,"x",1),this.moveTillCollision(t,"y",1)))}checkCompactMovement(t,e){let i=!1;this.gridster.grid.forEach(s=>{s.$item.compactEnabled!==!1&&this.moveTillCollision(s.$item,t,e)&&(i=!0,s.item[t]=s.$item[t],s.itemChanged())}),i&&this.checkCompact()}moveTillCollision(t,e,i){return t[e]+=i,this.gridster.checkCollision(t)?(t[e]-=i,!1):(this.moveTillCollision(t,e,i),!0)}},mr={gridType:m.Fit,scale:1,fixedColWidth:250,fixedRowHeight:250,keepFixedHeightInMobile:!1,keepFixedWidthInMobile:!1,setGridSize:!1,compactType:C.None,mobileBreakpoint:640,useBodyForBreakpoint:!1,allowMultiLayer:!1,defaultLayerIndex:0,maxLayerIndex:2,baseLayerIndex:1,minCols:1,maxCols:100,minRows:1,maxRows:100,defaultItemCols:1,defaultItemRows:1,maxItemCols:50,maxItemRows:50,minItemCols:1,minItemRows:1,minItemArea:1,maxItemArea:2500,addEmptyRowsCount:0,rowHeightRatio:1,margin:10,outerMargin:!0,outerMarginTop:null,outerMarginRight:null,outerMarginBottom:null,outerMarginLeft:null,useTransformPositioning:!0,scrollSensitivity:10,scrollSpeed:20,initCallback:void 0,destroyCallback:void 0,gridSizeChangedCallback:void 0,itemChangeCallback:void 0,itemResizeCallback:void 0,itemInitCallback:void 0,itemRemovedCallback:void 0,itemValidateCallback:void 0,enableEmptyCellClick:!1,enableEmptyCellContextMenu:!1,enableEmptyCellDrop:!1,enableEmptyCellDrag:!1,enableOccupiedCellDrop:!1,emptyCellClickCallback:void 0,emptyCellContextMenuCallback:void 0,emptyCellDropCallback:void 0,emptyCellDragCallback:void 0,emptyCellDragMaxCols:50,emptyCellDragMaxRows:50,ignoreMarginInRow:!1,draggable:{delayStart:0,enabled:!1,ignoreContentClass:"gridster-item-content",ignoreContent:!1,dragHandleClass:"drag-handler",stop:void 0,start:void 0,dropOverItems:!1,dropOverItemsCallback:void 0},resizable:{delayStart:0,enabled:!1,handles:{s:!0,e:!0,n:!0,w:!0,se:!0,ne:!0,sw:!0,nw:!0},stop:void 0,start:void 0},swap:!0,swapWhileDragging:!1,pushItems:!1,disablePushOnDrag:!1,disablePushOnResize:!1,pushDirections:{north:!0,east:!0,south:!0,west:!0},pushResizeItems:!1,displayGrid:Zi.OnDragAndResize,disableWindowResize:!1,disableWarnings:!1,scrollToNewItems:!1,disableScrollHorizontal:!1,disableScrollVertical:!1,enableBoundaryControl:!1,disableAutoPositionOnConflict:!1,dirType:O.LTR},z=class r{static merge(t,e,i){for(let s in e)e[s]!==void 0&&i.hasOwnProperty(s)&&(typeof e[s]=="object"?(s in t||(t[s]={}),t[s]=r.merge(t[s],e[s],i[s])):t[s]=e[s]);return t}static checkTouchEvent(t){t.clientX===void 0&&t.touches&&(t.touches&&t.touches.length?(t.clientX=t.touches[0].clientX,t.clientY=t.touches[0].clientY):t.changedTouches&&t.changedTouches.length&&(t.clientX=t.changedTouches[0].clientX,t.clientY=t.changedTouches[0].clientY))}static checkContentClassForEvent(t,e){if(t.$options.draggable.ignoreContent){if(!r.checkDragHandleClass(e.target,e.currentTarget,t.$options.draggable.dragHandleClass,t.$options.draggable.ignoreContentClass))return!0}else if(r.checkContentClass(e.target,e.currentTarget,t.$options.draggable.ignoreContentClass))return!0;return!1}static checkContentClassForEmptyCellClickEvent(t,e){return r.checkContentClass(e.target,e.currentTarget,t.$options.draggable.ignoreContentClass)||r.checkContentClass(e.target,e.currentTarget,t.$options.draggable.dragHandleClass)}static checkDragHandleClass(t,e,i,s){if(!t||t===e)return!1;if(t.hasAttribute("class")){let o=t.getAttribute("class").split(" ");if(o.indexOf(i)>-1)return!0;if(o.indexOf(s)>-1)return!1}return r.checkDragHandleClass(t.parentNode,e,i,s)}static checkContentClass(t,e,i){return!t||t===e?!1:t.hasAttribute("class")&&t.getAttribute("class").split(" ").indexOf(i)>-1?!0:r.checkContentClass(t.parentNode,e,i)}static compareItems(t,e){return t.y>e.y?-1:t.y<e.y?1:t.x>e.x?-1:1}},Le=class{gridster;initialItem;removeEmptyCellClickListenerFn;removeEmptyCellTouchendListenerFn;removeEmptyCellContextMenuListenerFn;removeEmptyCellDropListenerFn;removeEmptyCellMousedownListenerFn;removeEmptyCellTouchstartListenerFn;removeWindowMousemoveListenerFn;removeWindowTouchmoveListenerFn;removeWindowMouseupListenerFn;removeWindowTouchendListenerFn;removeEmptyCellDragoverListenerFn;removeDocumentDragendListenerFn;constructor(t){this.gridster=t}destroy(){this.gridster.previewStyle&&this.gridster.previewStyle(),this.gridster.movingItem=null,this.initialItem=this.gridster=null,this.removeDocumentDragendListenerFn&&(this.removeDocumentDragendListenerFn(),this.removeDocumentDragendListenerFn=null)}updateOptions(){this.gridster.$options.enableEmptyCellClick&&!this.removeEmptyCellClickListenerFn&&this.gridster.options.emptyCellClickCallback?(this.removeEmptyCellClickListenerFn=this.gridster.renderer.listen(this.gridster.el,"click",this.emptyCellClickCb),this.removeEmptyCellTouchendListenerFn=this.gridster.renderer.listen(this.gridster.el,"touchend",this.emptyCellClickCb)):!this.gridster.$options.enableEmptyCellClick&&this.removeEmptyCellClickListenerFn&&this.removeEmptyCellTouchendListenerFn&&(this.removeEmptyCellClickListenerFn(),this.removeEmptyCellTouchendListenerFn(),this.removeEmptyCellClickListenerFn=null,this.removeEmptyCellTouchendListenerFn=null),this.gridster.$options.enableEmptyCellContextMenu&&!this.removeEmptyCellContextMenuListenerFn&&this.gridster.options.emptyCellContextMenuCallback?this.removeEmptyCellContextMenuListenerFn=this.gridster.renderer.listen(this.gridster.el,"contextmenu",this.emptyCellContextMenuCb):!this.gridster.$options.enableEmptyCellContextMenu&&this.removeEmptyCellContextMenuListenerFn&&(this.removeEmptyCellContextMenuListenerFn(),this.removeEmptyCellContextMenuListenerFn=null),this.gridster.$options.enableEmptyCellDrop&&!this.removeEmptyCellDropListenerFn&&this.gridster.options.emptyCellDropCallback?(this.removeEmptyCellDropListenerFn=this.gridster.renderer.listen(this.gridster.el,"drop",this.emptyCellDragDrop),this.gridster.zone.runOutsideAngular(()=>{this.removeEmptyCellDragoverListenerFn=this.gridster.renderer.listen(this.gridster.el,"dragover",this.emptyCellDragOver)}),this.removeDocumentDragendListenerFn=this.gridster.renderer.listen("document","dragend",()=>{this.gridster.movingItem=null,this.gridster.previewStyle()})):!this.gridster.$options.enableEmptyCellDrop&&this.removeEmptyCellDropListenerFn&&this.removeEmptyCellDragoverListenerFn&&this.removeDocumentDragendListenerFn&&(this.removeEmptyCellDropListenerFn(),this.removeEmptyCellDragoverListenerFn(),this.removeDocumentDragendListenerFn(),this.removeEmptyCellDragoverListenerFn=null,this.removeEmptyCellDropListenerFn=null,this.removeDocumentDragendListenerFn=null),this.gridster.$options.enableEmptyCellDrag&&!this.removeEmptyCellMousedownListenerFn&&this.gridster.options.emptyCellDragCallback?(this.removeEmptyCellMousedownListenerFn=this.gridster.renderer.listen(this.gridster.el,"mousedown",this.emptyCellMouseDown),this.removeEmptyCellTouchstartListenerFn=this.gridster.renderer.listen(this.gridster.el,"touchstart",this.emptyCellMouseDown)):!this.gridster.$options.enableEmptyCellDrag&&this.removeEmptyCellMousedownListenerFn&&this.removeEmptyCellTouchstartListenerFn&&(this.removeEmptyCellMousedownListenerFn(),this.removeEmptyCellTouchstartListenerFn(),this.removeEmptyCellMousedownListenerFn=null,this.removeEmptyCellTouchstartListenerFn=null)}emptyCellClickCb=t=>{if(!this.gridster||this.gridster.movingItem||z.checkContentClassForEmptyCellClickEvent(this.gridster,t))return;let e=this.getValidItemFromEvent(t);e&&(this.gridster.options.emptyCellClickCallback&&this.gridster.options.emptyCellClickCallback(t,e),this.gridster.cdRef.markForCheck())};emptyCellContextMenuCb=t=>{if(this.gridster.movingItem||z.checkContentClassForEmptyCellClickEvent(this.gridster,t))return;t.preventDefault(),t.stopPropagation();let e=this.getValidItemFromEvent(t);e&&(this.gridster.options.emptyCellContextMenuCallback&&this.gridster.options.emptyCellContextMenuCallback(t,e),this.gridster.cdRef.markForCheck())};emptyCellDragDrop=t=>{let e=this.getValidItemFromEvent(t);e&&(this.gridster.options.emptyCellDropCallback&&this.gridster.options.emptyCellDropCallback(t,e),this.gridster.cdRef.markForCheck())};emptyCellDragOver=t=>{t.preventDefault(),t.stopPropagation();let e=this.getValidItemFromEvent(t);e?(t.dataTransfer&&(t.dataTransfer.dropEffect="move"),this.gridster.movingItem=e):(t.dataTransfer&&(t.dataTransfer.dropEffect="none"),this.gridster.movingItem=null),this.gridster.previewStyle()};emptyCellMouseDown=t=>{if(z.checkContentClassForEmptyCellClickEvent(this.gridster,t))return;t.preventDefault(),t.stopPropagation();let e=this.getValidItemFromEvent(t);!e||t.buttons!==1&&!(t instanceof TouchEvent)||(this.initialItem=e,this.gridster.movingItem=e,this.gridster.previewStyle(),this.gridster.zone.runOutsideAngular(()=>{this.removeWindowMousemoveListenerFn=this.gridster.renderer.listen("window","mousemove",this.emptyCellMouseMove),this.removeWindowTouchmoveListenerFn=this.gridster.renderer.listen("window","touchmove",this.emptyCellMouseMove)}),this.removeWindowMouseupListenerFn=this.gridster.renderer.listen("window","mouseup",this.emptyCellMouseUp),this.removeWindowTouchendListenerFn=this.gridster.renderer.listen("window","touchend",this.emptyCellMouseUp))};emptyCellMouseMove=t=>{t.preventDefault(),t.stopPropagation();let e=this.getValidItemFromEvent(t,this.initialItem);e&&(this.gridster.movingItem=e,this.gridster.previewStyle())};emptyCellMouseUp=t=>{this.removeWindowMousemoveListenerFn(),this.removeWindowTouchmoveListenerFn(),this.removeWindowMouseupListenerFn(),this.removeWindowTouchendListenerFn();let e=this.getValidItemFromEvent(t,this.initialItem);e&&(this.gridster.movingItem=e),this.gridster.options.emptyCellDragCallback&&this.gridster.movingItem&&this.gridster.options.emptyCellDragCallback(t,this.gridster.movingItem),setTimeout(()=>{this.initialItem=null,this.gridster&&(this.gridster.movingItem=null,this.gridster.previewStyle())}),this.gridster.cdRef.markForCheck()};getPixelsX(t,e){let i=this.gridster.options.scale;return i?(t.clientX-e.left)/i+this.gridster.el.scrollLeft-this.gridster.gridRenderer.getLeftMargin():t.clientX+this.gridster.el.scrollLeft-e.left-this.gridster.gridRenderer.getLeftMargin()}getPixelsY(t,e){let i=this.gridster.options.scale;return i?(t.clientY-e.top)/i+this.gridster.el.scrollTop-this.gridster.gridRenderer.getTopMargin():t.clientY+this.gridster.el.scrollTop-e.top-this.gridster.gridRenderer.getTopMargin()}getValidItemFromEvent(t,e){t.preventDefault(),t.stopPropagation(),z.checkTouchEvent(t);let i=this.gridster.el.getBoundingClientRect(),s=this.getPixelsX(t,i),o=this.getPixelsY(t,i),n={x:this.gridster.pixelsToPositionX(s,Math.floor,!0),y:this.gridster.pixelsToPositionY(o,Math.floor,!0),cols:this.gridster.$options.defaultItemCols,rows:this.gridster.$options.defaultItemRows};if(e&&(n.cols=Math.min(Math.abs(e.x-n.x)+1,this.gridster.$options.emptyCellDragMaxCols),n.rows=Math.min(Math.abs(e.y-n.y)+1,this.gridster.$options.emptyCellDragMaxRows),e.x<n.x?n.x=e.x:e.x-n.x>this.gridster.$options.emptyCellDragMaxCols-1&&(n.x=this.gridster.movingItem?this.gridster.movingItem.x:0),e.y<n.y?n.y=e.y:e.y-n.y>this.gridster.$options.emptyCellDragMaxRows-1&&(n.y=this.gridster.movingItem?this.gridster.movingItem.y:0)),!(!this.gridster.$options.enableOccupiedCellDrop&&this.gridster.checkCollision(n)))return n}},Fe=class{gridster;lastGridColumnStyles={};lastGridRowStyles={};constructor(t){this.gridster=t}destroy(){this.gridster=null}updateItem(t,e,i){if(this.gridster.mobile)this.clearCellPosition(i,t),this.gridster.$options.keepFixedHeightInMobile?i.setStyle(t,"height",(e.rows-1)*this.gridster.$options.margin+e.rows*this.gridster.$options.fixedRowHeight+"px"):i.setStyle(t,"height",e.rows*this.gridster.curWidth/e.cols+"px"),this.gridster.$options.keepFixedWidthInMobile?i.setStyle(t,"width",this.gridster.$options.fixedColWidth+"px"):i.setStyle(t,"width",""),i.setStyle(t,"margin-bottom",this.gridster.$options.margin+"px"),i.setStyle(t,O.LTR?"margin-right":"margin-left","");else{let s=Math.round(this.gridster.curColWidth*e.x),o=Math.round(this.gridster.curRowHeight*e.y),n=this.gridster.curColWidth*e.cols-this.gridster.$options.margin,a=this.gridster.curRowHeight*e.rows-this.gridster.$options.margin;this.setCellPosition(i,t,s,o),i.setStyle(t,"width",n+"px"),i.setStyle(t,"height",a+"px");let l=null,h=null;this.gridster.$options.outerMargin&&(this.gridster.rows===e.rows+e.y&&(this.gridster.$options.outerMarginBottom!==null?l=this.gridster.$options.outerMarginBottom+"px":l=this.gridster.$options.margin+"px"),this.gridster.columns===e.cols+e.x&&(this.gridster.$options.outerMarginBottom!==null?h=this.gridster.$options.outerMarginRight+"px":h=this.gridster.$options.margin+"px")),i.setStyle(t,"margin-bottom",l),i.setStyle(t,O.LTR?"margin-right":"margin-left",h)}}updateGridster(){let t="",e="",i="",s="";if(this.gridster.$options.gridType===m.Fit)t=m.Fit,e=m.ScrollVertical,i=m.ScrollHorizontal,s=m.Fixed;else if(this.gridster.$options.gridType===m.ScrollVertical)this.gridster.curRowHeight=this.gridster.curColWidth*this.gridster.$options.rowHeightRatio,t=m.ScrollVertical,e=m.Fit,i=m.ScrollHorizontal,s=m.Fixed;else if(this.gridster.$options.gridType===m.ScrollHorizontal){let o=this.gridster.$options.rowHeightRatio,n=o>=1?o:o+1;this.gridster.curColWidth=this.gridster.curRowHeight*n,t=m.ScrollHorizontal,e=m.Fit,i=m.ScrollVertical,s=m.Fixed}else this.gridster.$options.gridType===m.Fixed?(this.gridster.curColWidth=this.gridster.$options.fixedColWidth+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),this.gridster.curRowHeight=this.gridster.$options.fixedRowHeight+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),t=m.Fixed,e=m.Fit,i=m.ScrollVertical,s=m.ScrollHorizontal):this.gridster.$options.gridType===m.VerticalFixed?(this.gridster.curRowHeight=this.gridster.$options.fixedRowHeight+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),t=m.ScrollVertical,e=m.Fit,i=m.ScrollHorizontal,s=m.Fixed):this.gridster.$options.gridType===m.HorizontalFixed&&(this.gridster.curColWidth=this.gridster.$options.fixedColWidth+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),t=m.ScrollHorizontal,e=m.Fit,i=m.ScrollVertical,s=m.Fixed);this.gridster.mobile||this.gridster.$options.setGridSize&&this.gridster.$options.gridType!==m.Fit?this.gridster.renderer.removeClass(this.gridster.el,t):this.gridster.renderer.addClass(this.gridster.el,t),this.gridster.renderer.removeClass(this.gridster.el,e),this.gridster.renderer.removeClass(this.gridster.el,i),this.gridster.renderer.removeClass(this.gridster.el,s)}getGridColumnStyle(t){let e={left:this.gridster.curColWidth*t,width:this.gridster.curColWidth-this.gridster.$options.margin,height:this.gridster.gridRows.length*this.gridster.curRowHeight-this.gridster.$options.margin,style:{}};e.style=st(W({},this.getLeftPosition(e.left)),{width:e.width+"px",height:e.height+"px"});let i=this.lastGridColumnStyles[t];return i&&i.left===e.left&&i.width===e.width&&i.height===e.height?i.style:(this.lastGridColumnStyles[t]=e,e.style)}getGridRowStyle(t){let e={top:this.gridster.curRowHeight*t,width:this.gridster.gridColumns.length*this.gridster.curColWidth+this.gridster.$options.margin,height:this.gridster.curRowHeight-this.gridster.$options.margin,style:{}};e.style=st(W({},this.getTopPosition(e.top)),{width:e.width+"px",height:e.height+"px"});let i=this.lastGridRowStyles[t];return i&&i.top===e.top&&i.width===e.width&&i.height===e.height?i.style:(this.lastGridRowStyles[t]=e,e.style)}getLeftPosition(t){let e=this.gridster.$options.dirType===O.RTL?-t:t;return this.gridster.$options.useTransformPositioning?{transform:"translateX("+e+"px)"}:{left:this.getLeftMargin()+e+"px"}}getTopPosition(t){return this.gridster.$options.useTransformPositioning?{transform:"translateY("+t+"px)"}:{top:this.getTopMargin()+t+"px"}}clearCellPosition(t,e){this.gridster.$options.useTransformPositioning?t.setStyle(e,"transform",""):(t.setStyle(e,"top",""),t.setStyle(e,"left",""))}setCellPosition(t,e,i,s){let o=this.gridster.$options.dirType===O.RTL?-i:i;if(this.gridster.$options.useTransformPositioning){let n="translate3d("+o+"px, "+s+"px, 0)";t.setStyle(e,"transform",n)}else t.setStyle(e,"left",this.getLeftMargin()+o+"px"),t.setStyle(e,"top",this.getTopMargin()+s+"px")}getLeftMargin(){return this.gridster.$options.outerMargin?this.gridster.$options.outerMarginLeft!==null?this.gridster.$options.outerMarginLeft:this.gridster.$options.margin:0}getTopMargin(){return this.gridster.$options.outerMargin?this.gridster.$options.outerMarginTop!==null?this.gridster.$options.outerMarginTop:this.gridster.$options.margin:0}},fr=(()=>{class r{renderer;previewStyle$;gridRenderer;el;sub;constructor(e,i){this.renderer=i,this.el=e.nativeElement}ngOnInit(){this.sub=this.previewStyle$.subscribe(e=>this.previewStyle(e))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}previewStyle(e){e?(this.renderer.setStyle(this.el,"display","block"),this.gridRenderer.updateItem(this.el,e,this.renderer)):this.renderer.setStyle(this.el,"display","")}static \u0275fac=function(i){return new(i||r)(F(L),F(at))};static \u0275cmp=k({type:r,selectors:[["gridster-preview"]],inputs:{previewStyle$:"previewStyle$",gridRenderer:"gridRenderer"},decls:0,vars:0,template:function(i,s){},styles:[`gridster-preview{position:absolute;display:none;background:#00000026}
`],encapsulation:2})}return r})(),Ge=(()=>{class r{renderer;cdRef;zone;options;movingItem;el;$options;mobile;curWidth;curHeight;grid;columns=0;rows=0;curColWidth;curRowHeight;gridColumns=[];gridRows=[];windowResize;dragInProgress;emptyCell;compact;gridRenderer;previewStyle$=new I;calculateLayout$=new u;resize$=new u;destroy$=new u;constructor(e,i,s,o){this.renderer=i,this.cdRef=s,this.zone=o,this.el=e.nativeElement,this.$options=JSON.parse(JSON.stringify(mr)),this.mobile=!1,this.curWidth=0,this.curHeight=0,this.grid=[],this.curColWidth=0,this.curRowHeight=0,this.dragInProgress=!1,this.emptyCell=new Le(this),this.compact=new ze(this),this.gridRenderer=new Fe(this)}static checkCollisionTwoItemsForSwaping(e,i){let s=e.cols===1?0:1,o=i.cols===1?0:1,n=e.rows===1?0:1,a=i.rows===1?0:1;return e.x+s<i.x+i.cols&&e.x+e.cols>i.x+o&&e.y+n<i.y+i.rows&&e.y+e.rows>i.y+a}checkCollisionTwoItems(e,i){if(!(e.x<i.x+i.cols&&e.x+e.cols>i.x&&e.y<i.y+i.rows&&e.y+e.rows>i.y))return!1;if(!this.$options.allowMultiLayer)return!0;let o=this.$options.defaultLayerIndex,n=e.layerIndex===void 0?o:e.layerIndex,a=i.layerIndex===void 0?o:i.layerIndex;return n===a}ngOnInit(){this.options.initCallback&&this.options.initCallback(this),this.calculateLayout$.pipe(Ri(0),nt(this.destroy$)).subscribe(()=>this.calculateLayout()),this.resize$.pipe(Pt(()=>bi(100)),nt(this.destroy$)).subscribe(()=>this.resize())}ngOnChanges(e){e.options&&(this.setOptions(),this.options.api={optionsChanged:this.optionsChanged,resize:this.onResize,getNextPossiblePosition:this.getNextPossiblePosition,getFirstPossiblePosition:this.getFirstPossiblePosition,getLastPossiblePosition:this.getLastPossiblePosition,getItemComponent:i=>this.getItemComponent(i)},this.columns=this.$options.minCols,this.rows=this.$options.minRows+this.$options.addEmptyRowsCount,this.setGridSize(),this.calculateLayout())}resize(){let e,i;this.$options.gridType==="fit"&&!this.mobile?(i=this.el.offsetWidth,e=this.el.offsetHeight):(i=this.el.clientWidth,e=this.el.clientHeight),(i!==this.curWidth||e!==this.curHeight)&&this.checkIfToResize()&&this.onResize()}setOptions(){this.$options=z.merge(this.$options,this.options,this.$options),!this.$options.disableWindowResize&&!this.windowResize?this.windowResize=this.renderer.listen("window","resize",this.onResize):this.$options.disableWindowResize&&this.windowResize&&(this.windowResize(),this.windowResize=null),this.emptyCell.updateOptions()}optionsChanged=()=>{this.setOptions();let e=this.grid.length-1,i;for(;e>=0;e--)i=this.grid[e],i.updateOptions();this.calculateLayout()};ngOnDestroy(){this.destroy$.next(),this.previewStyle$.complete(),this.windowResize&&this.windowResize(),this.options&&this.options.destroyCallback&&this.options.destroyCallback(this),this.options&&this.options.api&&(this.options.api.resize=void 0,this.options.api.optionsChanged=void 0,this.options.api.getNextPossiblePosition=void 0,this.options.api=void 0),this.emptyCell.destroy(),this.emptyCell=null,this.compact.destroy(),this.compact=null}onResize=()=>{this.el.clientWidth&&(this.options.setGridSize&&(this.renderer.setStyle(this.el,"width",""),this.renderer.setStyle(this.el,"height","")),this.setGridSize(),this.calculateLayout())};checkIfToResize(){let e=this.el.clientWidth,i=this.el.offsetWidth,s=this.el.scrollWidth,o=this.el.clientHeight,n=this.el.offsetHeight,a=this.el.scrollHeight,l=e<i&&a>n&&a-n<i-e,h=o<n&&s>i&&s-i<n-o;return l?!1:!h}checkIfMobile(){return this.$options.useBodyForBreakpoint?this.$options.mobileBreakpoint>document.body.clientWidth:this.$options.mobileBreakpoint>this.curWidth}setGridSize(){let e=this.el,i,s;this.$options.setGridSize||this.$options.gridType===m.Fit&&!this.mobile?(i=e.offsetWidth,s=e.offsetHeight):(i=e.clientWidth,s=e.clientHeight),this.curWidth=i,this.curHeight=s}setGridDimensions(){this.setGridSize(),!this.mobile&&this.checkIfMobile()?(this.mobile=!this.mobile,this.renderer.addClass(this.el,"mobile")):this.mobile&&!this.checkIfMobile()&&(this.mobile=!this.mobile,this.renderer.removeClass(this.el,"mobile"));let e=this.$options.minRows,i=this.$options.minCols,s=this.grid.length-1,o;for(;s>=0;s--)o=this.grid[s],o.notPlaced||(e=Math.max(e,o.$item.y+o.$item.rows),i=Math.max(i,o.$item.x+o.$item.cols));e+=this.$options.addEmptyRowsCount,(this.columns!==i||this.rows!==e)&&(this.columns=i,this.rows=e,this.options.gridSizeChangedCallback&&this.options.gridSizeChangedCallback(this))}calculateLayout(){if(this.compact&&this.compact.checkCompact(),this.setGridDimensions(),this.$options.outerMargin){let s=-this.$options.margin;this.$options.outerMarginLeft!==null?(s+=this.$options.outerMarginLeft,this.renderer.setStyle(this.el,"padding-left",this.$options.outerMarginLeft+"px")):(s+=this.$options.margin,this.renderer.setStyle(this.el,"padding-left",this.$options.margin+"px")),this.$options.outerMarginRight!==null?(s+=this.$options.outerMarginRight,this.renderer.setStyle(this.el,"padding-right",this.$options.outerMarginRight+"px")):(s+=this.$options.margin,this.renderer.setStyle(this.el,"padding-right",this.$options.margin+"px")),this.curColWidth=(this.curWidth-s)/this.columns;let o=-this.$options.margin;this.$options.outerMarginTop!==null?(o+=this.$options.outerMarginTop,this.renderer.setStyle(this.el,"padding-top",this.$options.outerMarginTop+"px")):(o+=this.$options.margin,this.renderer.setStyle(this.el,"padding-top",this.$options.margin+"px")),this.$options.outerMarginBottom!==null?(o+=this.$options.outerMarginBottom,this.renderer.setStyle(this.el,"padding-bottom",this.$options.outerMarginBottom+"px")):(o+=this.$options.margin,this.renderer.setStyle(this.el,"padding-bottom",this.$options.margin+"px")),this.curRowHeight=(this.curHeight-o)/this.rows*this.$options.rowHeightRatio}else this.curColWidth=(this.curWidth+this.$options.margin)/this.columns,this.curRowHeight=(this.curHeight+this.$options.margin)/this.rows*this.$options.rowHeightRatio,this.renderer.setStyle(this.el,"padding-left","0px"),this.renderer.setStyle(this.el,"padding-right","0px"),this.renderer.setStyle(this.el,"padding-top","0px"),this.renderer.setStyle(this.el,"padding-bottom","0px");this.gridRenderer.updateGridster(),this.$options.setGridSize?(this.renderer.addClass(this.el,"gridSize"),this.mobile||(this.renderer.setStyle(this.el,"width",this.columns*this.curColWidth+this.$options.margin+"px"),this.renderer.setStyle(this.el,"height",this.rows*this.curRowHeight+this.$options.margin+"px"))):(this.renderer.removeClass(this.el,"gridSize"),this.renderer.setStyle(this.el,"width",""),this.renderer.setStyle(this.el,"height","")),this.updateGrid();let e=this.grid.length-1,i;for(;e>=0;e--)i=this.grid[e],i.setSize(),i.drag.toggle(),i.resize.toggle();this.resize$.next()}updateGrid(){this.$options.displayGrid==="always"&&!this.mobile?this.renderer.addClass(this.el,"display-grid"):this.$options.displayGrid==="onDrag&Resize"&&this.dragInProgress?this.renderer.addClass(this.el,"display-grid"):(this.$options.displayGrid==="none"||!this.dragInProgress||this.mobile)&&this.renderer.removeClass(this.el,"display-grid"),this.setGridDimensions(),this.gridColumns.length=r.getNewArrayLength(this.columns,this.curWidth,this.curColWidth),this.gridRows.length=r.getNewArrayLength(this.rows,this.curHeight,this.curRowHeight),this.cdRef.markForCheck()}addItem(e){e.$item.cols===void 0&&(e.$item.cols=this.$options.defaultItemCols,e.item.cols=e.$item.cols,e.itemChanged()),e.$item.rows===void 0&&(e.$item.rows=this.$options.defaultItemRows,e.item.rows=e.$item.rows,e.itemChanged()),e.$item.x===-1||e.$item.y===-1?this.autoPositionItem(e):this.checkCollision(e.$item)&&(this.$options.disableWarnings||(e.notPlaced=!0,console.warn("Can't be placed in the bounds of the dashboard, trying to auto position!/n"+JSON.stringify(e.item,["cols","rows","x","y"]))),this.$options.disableAutoPositionOnConflict?e.notPlaced=!0:this.autoPositionItem(e)),this.grid.push(e),this.calculateLayout$.next()}removeItem(e){this.grid.splice(this.grid.indexOf(e),1),this.calculateLayout$.next(),this.options.itemRemovedCallback&&this.options.itemRemovedCallback(e.item,e)}checkCollision(e){let i=!1;if(this.options.itemValidateCallback&&(i=!this.options.itemValidateCallback(e)),!i&&this.checkGridCollision(e)&&(i=!0),!i){let s=this.findItemWithItem(e);s&&(i=s)}return i}checkGridCollision(e){let i=e.y>-1&&e.x>-1,s=e.cols+e.x<=this.$options.maxCols,o=e.rows+e.y<=this.$options.maxRows,n=e.maxItemCols===void 0?this.$options.maxItemCols:e.maxItemCols,a=e.minItemCols===void 0?this.$options.minItemCols:e.minItemCols,l=e.maxItemRows===void 0?this.$options.maxItemRows:e.maxItemRows,h=e.minItemRows===void 0?this.$options.minItemRows:e.minItemRows,c=e.cols<=n&&e.cols>=a,p=e.rows<=l&&e.rows>=h,f=e.minItemArea===void 0?this.$options.minItemArea:e.minItemArea,S=e.maxItemArea===void 0?this.$options.maxItemArea:e.maxItemArea,D=e.cols*e.rows,E=f<=D,R=S>=D;return!(i&&s&&o&&c&&p&&E&&R)}findItemWithItem(e){let i=0,s;for(;i<this.grid.length;i++)if(s=this.grid[i],s.$item!==e&&this.checkCollisionTwoItems(s.$item,e))return s;return!1}findItemsWithItem(e){let i=[],s=0,o;for(;s<this.grid.length;s++)o=this.grid[s],o.$item!==e&&this.checkCollisionTwoItems(o.$item,e)&&i.push(o);return i}autoPositionItem(e){this.getNextPossiblePosition(e.$item)?(e.notPlaced=!1,e.item.x=e.$item.x,e.item.y=e.$item.y,e.itemChanged()):(e.notPlaced=!0,this.$options.disableWarnings||console.warn("Can't be placed in the bounds of the dashboard!/n"+JSON.stringify(e.item,["cols","rows","x","y"])))}getNextPossiblePosition=(e,i={})=>{e.cols===-1&&(e.cols=this.$options.defaultItemCols),e.rows===-1&&(e.rows=this.$options.defaultItemRows),this.setGridDimensions();let s=i.y||0,o;for(;s<this.rows;s++)for(e.y=s,o=i.x||0;o<this.columns;o++)if(e.x=o,!this.checkCollision(e))return!0;let n=this.$options.maxRows>=this.rows+e.rows,a=this.$options.maxCols>=this.columns+e.cols;return!(this.rows<=this.columns&&n)&&a?(e.x=this.columns,e.y=0,!0):n?(e.y=this.rows,e.x=0,!0):!1};getFirstPossiblePosition=e=>{let i=Object.assign({},e);return this.getNextPossiblePosition(i),i};getLastPossiblePosition=e=>{let i={y:0,x:0};i=this.grid.reduce((o,n)=>{let a={y:n.$item.y+n.$item.rows-1,x:n.$item.x+n.$item.cols-1};return z.compareItems(o,a)===1?a:o},i);let s=Object.assign({},e);return this.getNextPossiblePosition(s,i),s};pixelsToPositionX(e,i,s){let o=i(e/this.curColWidth);return s?o:Math.max(o,0)}pixelsToPositionY(e,i,s){let o=i(e/this.curRowHeight);return s?o:Math.max(o,0)}positionXToPixels(e){return e*this.curColWidth}positionYToPixels(e){return e*this.curRowHeight}getItemComponent(e){return this.grid.find(i=>i.item===e)}checkCollisionForSwaping(e){let i=!1;if(this.options.itemValidateCallback&&(i=!this.options.itemValidateCallback(e)),!i&&this.checkGridCollision(e)&&(i=!0),!i){let s=this.findItemWithItemForSwapping(e);s&&(i=s)}return i}findItemWithItemForSwapping(e){let i=this.grid.length-1,s;for(;i>-1;i--)if(s=this.grid[i],s.$item!==e&&r.checkCollisionTwoItemsForSwaping(s.$item,e))return s;return!1}previewStyle(e=!1){this.movingItem?(this.compact&&e&&this.compact.checkCompactItem(this.movingItem),this.previewStyle$.next(this.movingItem)):this.previewStyle$.next(null)}static getNewArrayLength(e,i,s){let o=Math.max(e,Math.floor(i/s));return o<0?0:Number.isFinite(o)?Math.floor(o):0}static \u0275fac=function(i){return new(i||r)(F(L),F(at),F(Tt),F(M))};static \u0275cmp=k({type:r,selectors:[["gridster"]],inputs:{options:"options"},features:[ut],ngContentSelectors:Ui,decls:6,vars:2,consts:[[1,"gridster-column",3,"ngStyle"],[1,"gridster-row",3,"ngStyle"],[1,"gridster-preview",3,"gridRenderer","previewStyle$"]],template:function(i,s){i&1&&(Qt(),lt(0,or,1,1,"div",0,Te),lt(2,nr,1,1,"div",1,Te),te(4),$(5,"gridster-preview",2)),i&2&&(ht(s.gridColumns),y(2),ht(s.gridRows),y(3),H("gridRenderer",s.gridRenderer)("previewStyle$",s.previewStyle$))},dependencies:[Hi,fr],styles:[`gridster{position:relative;box-sizing:border-box;background:gray;width:100%;height:100%;-webkit-user-select:none;user-select:none;display:block}gridster.fit{overflow-x:hidden;overflow-y:hidden}gridster.scrollVertical{overflow-x:hidden;overflow-y:auto}gridster.scrollHorizontal{overflow-x:auto;overflow-y:hidden}gridster.fixed{overflow:auto}gridster.mobile{overflow-x:hidden;overflow-y:auto}gridster.mobile gridster-item{position:relative}gridster.gridSize{height:initial;width:initial}gridster.gridSize.fit{height:100%;width:100%}gridster .gridster-column,gridster .gridster-row{position:absolute;display:none;transition:.3s;box-sizing:border-box}gridster.display-grid .gridster-column,gridster.display-grid .gridster-row{display:block}gridster .gridster-column{border-left:1px solid white;border-right:1px solid white}gridster .gridster-row{border-top:1px solid white;border-bottom:1px solid white}
`],encapsulation:2})}return r})(),oe=class{fromSouth;fromNorth;fromEast;fromWest;pushedItems;pushedItemsTemp;pushedItemsTempPath;pushedItemsPath;gridsterItem;gridster;pushedItemsOrder;tryPattern;iteration=0;constructor(t){this.pushedItems=[],this.pushedItemsTemp=[],this.pushedItemsTempPath=[],this.pushedItemsPath=[],this.gridsterItem=t,this.gridster=t.gridster,this.tryPattern={fromEast:[this.tryWest,this.trySouth,this.tryNorth,this.tryEast],fromWest:[this.tryEast,this.trySouth,this.tryNorth,this.tryWest],fromNorth:[this.trySouth,this.tryEast,this.tryWest,this.tryNorth],fromSouth:[this.tryNorth,this.tryEast,this.tryWest,this.trySouth]},this.fromSouth="fromSouth",this.fromNorth="fromNorth",this.fromEast="fromEast",this.fromWest="fromWest"}destroy(){this.gridster=this.gridsterItem=null}pushItems(t,e){if(this.gridster.$options.pushItems&&!e){this.pushedItemsOrder=[],this.iteration=0;let i=this.push(this.gridsterItem,t);return i||this.restoreTempItems(),this.pushedItemsOrder=[],this.pushedItemsTemp=[],this.pushedItemsTempPath=[],i}else return!1}restoreTempItems(){let t=this.pushedItemsTemp.length-1;for(;t>-1;t--)this.removeFromTempPushed(this.pushedItemsTemp[t])}restoreItems(){let t=0,e=this.pushedItems.length,i;for(;t<e;t++)i=this.pushedItems[t],i.$item.x=i.item.x||0,i.$item.y=i.item.y||0,i.setSize();this.pushedItems=[],this.pushedItemsPath=[]}setPushedItems(){let t=0,e=this.pushedItems.length,i;for(;t<e;t++)i=this.pushedItems[t],i.checkItemChanges(i.$item,i.item);this.pushedItems=[],this.pushedItemsPath=[]}checkPushBack(){let t=this.pushedItems.length-1,e=!1;for(;t>-1;t--)this.checkPushedItem(this.pushedItems[t],t)&&(e=!0);e&&this.checkPushBack()}push(t,e){if(this.iteration>100)return console.warn("max iteration reached"),!1;if(this.gridster.checkGridCollision(t.$item)||e==="")return!1;let i=this.gridster.findItemsWithItem(t.$item),s=e===this.fromNorth||e===this.fromWest;i.sort((h,c)=>s?c.$item.y-h.$item.y||c.$item.x-h.$item.x:h.$item.y-c.$item.y||h.$item.x-c.$item.x);let o=0,n,a=!0,l=[];for(;o<i.length;o++){if(n=i[o],n===this.gridsterItem)continue;if(!n.canBeDragged()){a=!1;break}let h=this.pushedItemsTemp.indexOf(n);if(h>-1&&this.pushedItemsTempPath[h].length>10){a=!1;break}if(this.tryPattern[e][0].call(this,n,t))this.pushedItemsOrder.push(n),l.push(n);else if(this.tryPattern[e][1].call(this,n,t))this.pushedItemsOrder.push(n),l.push(n);else if(this.tryPattern[e][2].call(this,n,t))this.pushedItemsOrder.push(n),l.push(n);else if(this.tryPattern[e][3].call(this,n,t))this.pushedItemsOrder.push(n),l.push(n);else{a=!1;break}}if(!a&&(o=this.pushedItemsOrder.lastIndexOf(l[0]),o>-1)){let h=this.pushedItemsOrder.length-1;for(;h>=o;h--)n=this.pushedItemsOrder[h],this.pushedItemsOrder.pop(),this.removeFromTempPushed(n),this.removeFromPushedItem(n)}return this.iteration++,a}trySouth(t,e){return this.gridster.$options.pushDirections.south?(this.addToTempPushed(t),t.$item.y=e.$item.y+e.$item.rows,this.push(t,this.fromNorth)?(t.setSize(),this.addToPushed(t),!0):(this.removeFromTempPushed(t),!1)):!1}tryNorth(t,e){return this.gridster.$options.pushDirections.north?(this.addToTempPushed(t),t.$item.y=e.$item.y-t.$item.rows,this.push(t,this.fromSouth)?(t.setSize(),this.addToPushed(t),!0):(this.removeFromTempPushed(t),!1)):!1}tryEast(t,e){return this.gridster.$options.pushDirections.east?(this.addToTempPushed(t),t.$item.x=e.$item.x+e.$item.cols,this.push(t,this.fromWest)?(t.setSize(),this.addToPushed(t),!0):(this.removeFromTempPushed(t),!1)):!1}tryWest(t,e){return this.gridster.$options.pushDirections.west?(this.addToTempPushed(t),t.$item.x=e.$item.x-t.$item.cols,this.push(t,this.fromEast)?(t.setSize(),this.addToPushed(t),!0):(this.removeFromTempPushed(t),!1)):!1}addToTempPushed(t){let e=this.pushedItemsTemp.indexOf(t);e===-1&&(e=this.pushedItemsTemp.push(t)-1,this.pushedItemsTempPath[e]=[]),this.pushedItemsTempPath[e].push({x:t.$item.x,y:t.$item.y})}removeFromTempPushed(t){let e=this.pushedItemsTemp.indexOf(t),i=this.pushedItemsTempPath[e].pop();i&&(t.$item.x=i.x,t.$item.y=i.y,t.setSize(),this.pushedItemsTempPath[e].length||(this.pushedItemsTemp.splice(e,1),this.pushedItemsTempPath.splice(e,1)))}addToPushed(t){if(this.pushedItems.indexOf(t)<0)this.pushedItems.push(t),this.pushedItemsPath.push([{x:t.item.x||0,y:t.item.y||0},{x:t.$item.x,y:t.$item.y}]);else{let e=this.pushedItems.indexOf(t);this.pushedItemsPath[e].push({x:t.$item.x,y:t.$item.y})}}removeFromPushed(t){t>-1&&(this.pushedItems.splice(t,1),this.pushedItemsPath.splice(t,1))}removeFromPushedItem(t){let e=this.pushedItems.indexOf(t);e>-1&&(this.pushedItemsPath[e].pop(),this.pushedItemsPath.length||(this.pushedItems.splice(e,1),this.pushedItemsPath.splice(e,1)))}checkPushedItem(t,e){let i=this.pushedItemsPath[e],s=i.length-2,o,n,a,l=!1;for(;s>-1;s--)o=i[s],n=t.$item.x,a=t.$item.y,t.$item.x=o.x,t.$item.y=o.y,this.gridster.findItemWithItem(t.$item)?(t.$item.x=n,t.$item.y=a):(t.setSize(),i.splice(s+1,i.length-s-1),l=!0);return i.length<2&&this.removeFromPushed(e),l}},Mt,gt,qi=50,j,$t,ot,zt,Lt,Ft,Nt;function Ki(r,t,e,i,s,o,n,a,l,h){Mt=r.$options.scrollSensitivity,gt=r.$options.scrollSpeed,j=r.el,$t=l,ot=h;let c=j.offsetWidth,p=j.offsetHeight,f=j.scrollLeft,S=j.scrollTop,D=e-S,E=p+S-e-s,{clientX:R,clientY:Rt}=o;if(!r.$options.disableScrollVertical)if(n.clientY<Rt&&E<Mt){if(is(),$t&&ot&&!ot.south||Nt)return;Nt=Yi(1,a,n)}else if(n.clientY>Rt&&S>0&&D<Mt){if(es(),$t&&ot&&!ot.north||Ft)return;Ft=Yi(-1,a,n)}else n.clientY!==Rt&&Ye();let Ut=f+c-t-i,Dt=t-f;if(!r.$options.disableScrollHorizontal)if(n.clientX<R&&Ut<=Mt){if(ts(),$t&&ot&&!ot.east||zt)return;zt=ji(1,a,n)}else if(n.clientX>R&&f>0&&Dt<Mt){if(Qi(),$t&&ot&&!ot.west||Lt)return;Lt=ji(-1,a,n)}else n.clientX!==R&&Xe()}function Yi(r,t,e){let i=e.clientY;return window.setInterval(()=>{(!j||r===-1&&j.scrollTop-gt<0)&&Ye(),j.scrollTop+=r*gt,i+=r*gt,t({clientX:e.clientX,clientY:i})},qi)}function ji(r,t,e){let i=e.clientX;return window.setInterval(()=>{(!j||r===-1&&j.scrollLeft-gt<0)&&Xe(),j.scrollLeft+=r*gt,i+=r*gt,t({clientX:i,clientY:e.clientY})},qi)}function Ji(){Xe(),Ye(),j=null}function Xe(){Qi(),ts()}function Ye(){is(),es()}function Qi(){zt&&(clearInterval(zt),zt=0)}function ts(){Lt&&(clearInterval(Lt),Lt=0)}function es(){Nt&&(clearInterval(Nt),Nt=0)}function is(){Ft&&(clearInterval(Ft),Ft=0)}var Ne=class{swapedItem;gridsterItem;gridster;constructor(t){this.gridsterItem=t,this.gridster=t.gridster}destroy(){this.gridster=this.gridsterItem=this.swapedItem=null}swapItems(){this.gridster.$options.swap&&(this.checkSwapBack(),this.checkSwap(this.gridsterItem))}checkSwapBack(){if(this.swapedItem){let t=this.swapedItem.$item.x,e=this.swapedItem.$item.y;this.swapedItem.$item.x=this.swapedItem.item.x||0,this.swapedItem.$item.y=this.swapedItem.item.y||0,this.gridster.checkCollision(this.swapedItem.$item)?(this.swapedItem.$item.x=t,this.swapedItem.$item.y=e):(this.swapedItem.setSize(),this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.swapedItem=void 0)}}restoreSwapItem(){this.swapedItem&&(this.swapedItem.$item.x=this.swapedItem.item.x||0,this.swapedItem.$item.y=this.swapedItem.item.y||0,this.swapedItem.setSize(),this.swapedItem=void 0)}setSwapItem(){this.swapedItem&&(this.swapedItem.checkItemChanges(this.swapedItem.$item,this.swapedItem.item),this.swapedItem=void 0)}checkSwap(t){let e;if(this.gridster.$options.swapWhileDragging?e=this.gridster.checkCollisionForSwaping(t.$item):e=this.gridster.checkCollision(t.$item),e&&e!==!0&&e.canBeDragged()){let i=e,s=i.$item.x,o=i.$item.y,n=t.$item.x,a=t.$item.y,l=n-s,h=a-o;i.$item.x=t.item.x-l,i.$item.y=t.item.y-h,t.$item.x=i.item.x+l,t.$item.y=i.item.y+h,this.gridster.checkCollision(i.$item)||this.gridster.checkCollision(t.$item)?(t.$item.x=n,t.$item.y=a,i.$item.x=s,i.$item.y=o):(i.setSize(),this.swapedItem=i,this.gridster.$options.swapWhileDragging&&(this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.setSwapItem()))}}},_r="gridster-item-resizable-handler",Y=function(r){return r.UP="UP",r.DOWN="DOWN",r.LEFT="LEFT",r.RIGHT="RIGHT",r}(Y||{}),Be=class{zone;gridsterItem;gridster;lastMouse;offsetLeft;offsetTop;margin;outerMarginTop;outerMarginRight;outerMarginBottom;outerMarginLeft;diffTop;diffLeft;originalClientX;originalClientY;top;left;height;width;positionX;positionY;positionXBackup;positionYBackup;enabled;mousemove;mouseup;mouseleave;cancelOnBlur;touchmove;touchend;touchcancel;mousedown;touchstart;push;swap;path;collision=!1;constructor(t,e,i){this.zone=i,this.gridsterItem=t,this.gridster=e,this.lastMouse={clientX:0,clientY:0},this.path=[]}destroy(){this.gridster.previewStyle&&this.gridster.previewStyle(!0),this.gridsterItem=this.gridster=this.collision=null,this.mousedown&&(this.mousedown(),this.touchstart())}dragStart(t){t.which&&t.which!==1||(this.gridster.options.draggable&&this.gridster.options.draggable.start&&this.gridster.options.draggable.start(this.gridsterItem.item,this.gridsterItem,t),t.stopPropagation(),t.preventDefault(),this.zone.runOutsideAngular(()=>{this.mousemove=this.gridsterItem.renderer.listen("document","mousemove",this.dragMove),this.touchmove=this.gridster.renderer.listen(this.gridster.el,"touchmove",this.dragMove)}),this.mouseup=this.gridsterItem.renderer.listen("document","mouseup",this.dragStop),this.mouseleave=this.gridsterItem.renderer.listen("document","mouseleave",this.dragStop),this.cancelOnBlur=this.gridsterItem.renderer.listen("window","blur",this.dragStop),this.touchend=this.gridsterItem.renderer.listen("document","touchend",this.dragStop),this.touchcancel=this.gridsterItem.renderer.listen("document","touchcancel",this.dragStop),this.gridsterItem.renderer.addClass(this.gridsterItem.el,"gridster-item-moving"),this.margin=this.gridster.$options.margin,this.outerMarginTop=this.gridster.$options.outerMarginTop,this.outerMarginRight=this.gridster.$options.outerMarginRight,this.outerMarginBottom=this.gridster.$options.outerMarginBottom,this.outerMarginLeft=this.gridster.$options.outerMarginLeft,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.left=this.gridsterItem.left-this.margin,this.top=this.gridsterItem.top-this.margin,this.originalClientX=t.clientX,this.originalClientY=t.clientY,this.width=this.gridsterItem.width,this.height=this.gridsterItem.height,this.gridster.$options.dirType===O.RTL?this.diffLeft=t.clientX-this.gridster.el.scrollWidth+this.gridsterItem.left:this.diffLeft=t.clientX+this.offsetLeft-this.margin-this.left,this.diffTop=t.clientY+this.offsetTop-this.margin-this.top,this.gridster.movingItem=this.gridsterItem.$item,this.gridster.previewStyle(!0),this.push=new oe(this.gridsterItem),this.swap=new Ne(this.gridsterItem),this.gridster.dragInProgress=!0,this.gridster.updateGrid(),this.path.push({x:this.gridsterItem.item.x||0,y:this.gridsterItem.item.y||0}))}dragMove=t=>{t.stopPropagation(),t.preventDefault(),z.checkTouchEvent(t);let e=this.getDirections(t);this.gridster.options.enableBoundaryControl&&(e.includes(Y.UP)&&this.gridsterItem.el.getBoundingClientRect().top<this.gridster.el.getBoundingClientRect().top+(this.outerMarginTop??this.margin)&&(e=e.filter(i=>i!=Y.UP),t=new MouseEvent(t.type,{clientX:t.clientX,clientY:this.lastMouse.clientY})),e.includes(Y.LEFT)&&this.gridsterItem.el.getBoundingClientRect().left<this.gridster.el.getBoundingClientRect().left+(this.outerMarginLeft??this.margin)&&(e=e.filter(i=>i!=Y.LEFT),t=new MouseEvent(t.type,{clientX:this.lastMouse.clientX,clientY:t.clientY})),e.includes(Y.RIGHT)&&this.gridsterItem.el.getBoundingClientRect().right>this.gridster.el.getBoundingClientRect().right-(this.outerMarginRight??this.margin)&&(e=e.filter(i=>i!=Y.RIGHT),t=new MouseEvent(t.type,{clientX:this.lastMouse.clientX,clientY:t.clientY})),e.includes(Y.DOWN)&&this.gridsterItem.el.getBoundingClientRect().bottom>this.gridster.el.getBoundingClientRect().bottom-(this.outerMarginBottom??this.margin)&&(e=e.filter(i=>i!=Y.DOWN),t=new MouseEvent(t.type,{clientX:t.clientX,clientY:this.lastMouse.clientY}))),e.length&&(this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,Ki(this.gridster,this.left,this.top,this.width,this.height,t,this.lastMouse,this.calculateItemPositionFromMousePosition),this.calculateItemPositionFromMousePosition(t))};calculateItemPositionFromMousePosition=t=>{this.gridster.options.scale?this.calculateItemPositionWithScale(t,this.gridster.options.scale):this.calculateItemPositionWithoutScale(t),this.calculateItemPosition(),this.lastMouse.clientX=t.clientX,this.lastMouse.clientY=t.clientY,this.zone.run(()=>{this.gridster.updateGrid()})};calculateItemPositionWithScale(t,e){this.gridster.$options.dirType===O.RTL?this.left=this.gridster.el.scrollWidth-this.originalClientX+(t.clientX-this.originalClientX)/e+this.diffLeft:this.left=this.originalClientX+(t.clientX-this.originalClientX)/e+this.offsetLeft-this.diffLeft,this.top=this.originalClientY+(t.clientY-this.originalClientY)/e+this.offsetTop-this.diffTop}calculateItemPositionWithoutScale(t){this.gridster.$options.dirType===O.RTL?this.left=this.gridster.el.scrollWidth-t.clientX+this.diffLeft:this.left=t.clientX+this.offsetLeft-this.diffLeft,this.top=t.clientY+this.offsetTop-this.diffTop}dragStop=t=>{t.stopPropagation(),t.preventDefault(),Ji(),this.cancelOnBlur(),this.mousemove(),this.mouseup(),this.mouseleave(),this.touchmove(),this.touchend(),this.touchcancel(),this.gridsterItem.renderer.removeClass(this.gridsterItem.el,"gridster-item-moving"),this.gridster.dragInProgress=!1,this.gridster.updateGrid(),this.path=[],this.gridster.options.draggable&&this.gridster.options.draggable.stop?Promise.resolve(this.gridster.options.draggable.stop(this.gridsterItem.item,this.gridsterItem,t)).then(this.makeDrag,this.cancelDrag):this.makeDrag(),setTimeout(()=>{this.gridster&&(this.gridster.movingItem=null,this.gridster.previewStyle(!0))})};cancelDrag=()=>{this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.gridsterItem.setSize(),this.push&&this.push.restoreItems(),this.swap&&this.swap.restoreSwapItem(),this.push&&(this.push.destroy(),this.push=null),this.swap&&(this.swap.destroy(),this.swap=null)};makeDrag=()=>{this.gridster.$options.draggable.dropOverItems&&this.gridster.options.draggable&&this.gridster.options.draggable.dropOverItemsCallback&&this.collision&&this.collision!==!0&&this.collision.$item&&this.gridster.options.draggable.dropOverItemsCallback(this.gridsterItem.item,this.collision.item,this.gridster),this.collision=!1,this.gridsterItem.setSize(),this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.push&&this.push.setPushedItems(),this.swap&&this.swap.setSwapItem(),this.push&&(this.push.destroy(),this.push=null),this.swap&&(this.swap.destroy(),this.swap=null)};calculateItemPosition(){if(this.gridster.movingItem=this.gridsterItem.$item,this.positionX=this.gridster.pixelsToPositionX(this.left,Math.round),this.positionY=this.gridster.pixelsToPositionY(this.top,Math.round),this.positionXBackup=this.gridsterItem.$item.x,this.positionYBackup=this.gridsterItem.$item.y,this.gridsterItem.$item.x=this.positionX,this.gridster.checkGridCollision(this.gridsterItem.$item)&&(this.gridsterItem.$item.x=this.positionXBackup),this.gridsterItem.$item.y=this.positionY,this.gridster.checkGridCollision(this.gridsterItem.$item)&&(this.gridsterItem.$item.y=this.positionYBackup),this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,this.left,this.top),this.positionXBackup!==this.gridsterItem.$item.x||this.positionYBackup!==this.gridsterItem.$item.y){let t=this.path[this.path.length-1],e="";t.x<this.gridsterItem.$item.x?e=this.push.fromWest:t.x>this.gridsterItem.$item.x?e=this.push.fromEast:t.y<this.gridsterItem.$item.y?e=this.push.fromNorth:t.y>this.gridsterItem.$item.y&&(e=this.push.fromSouth),this.push.pushItems(e,this.gridster.$options.disablePushOnDrag),this.swap.swapItems(),this.collision=this.gridster.checkCollision(this.gridsterItem.$item),this.collision?(this.gridsterItem.$item.x=this.positionXBackup,this.gridsterItem.$item.y=this.positionYBackup,this.gridster.$options.draggable.dropOverItems&&this.collision!==!0&&this.collision.$item&&(this.gridster.movingItem=null)):this.path.push({x:this.gridsterItem.$item.x,y:this.gridsterItem.$item.y}),this.push.checkPushBack()}else this.collision=!1;this.gridster.previewStyle(!0)}toggle(){let t=this.gridsterItem.canBeDragged();!this.enabled&&t?(this.enabled=!this.enabled,this.mousedown=this.gridsterItem.renderer.listen(this.gridsterItem.el,"mousedown",this.dragStartDelay),this.touchstart=this.gridsterItem.renderer.listen(this.gridsterItem.el,"touchstart",this.dragStartDelay)):this.enabled&&!t&&(this.enabled=!this.enabled,this.mousedown(),this.touchstart())}dragStartDelay=t=>{if(t.target.classList.contains(_r)||z.checkContentClassForEvent(this.gridster,t))return;if(z.checkTouchEvent(t),!this.gridster.$options.draggable.delayStart){this.dragStart(t);return}let i=setTimeout(()=>{this.dragStart(t),p()},this.gridster.$options.draggable.delayStart),s=this.gridsterItem.renderer.listen("document","mouseup",p),o=this.gridsterItem.renderer.listen("document","mouseleave",p),n=this.gridsterItem.renderer.listen("window","blur",p),a=this.gridsterItem.renderer.listen("document","touchmove",c),l=this.gridsterItem.renderer.listen("document","touchend",p),h=this.gridsterItem.renderer.listen("document","touchcancel",p);function c(f){z.checkTouchEvent(f),(Math.abs(f.clientX-t.clientX)>9||Math.abs(f.clientY-t.clientY)>9)&&p()}function p(){clearTimeout(i),n(),s(),o(),a(),l(),h()}};getDirections(t){let e=[];return this.lastMouse.clientX===0&&this.lastMouse.clientY===0&&(this.lastMouse.clientY=t.clientY,this.lastMouse.clientX=t.clientX),this.lastMouse.clientY>t.clientY&&e.push(Y.UP),this.lastMouse.clientY<t.clientY&&e.push(Y.DOWN),this.lastMouse.clientX<t.clientX&&e.push(Y.RIGHT),this.lastMouse.clientX>t.clientX&&e.push(Y.LEFT),e}},Ae=class{fromSouth;fromNorth;fromEast;fromWest;pushedItems;pushedItemsPath;gridsterItem;gridster;tryPattern;constructor(t){this.pushedItems=[],this.pushedItemsPath=[],this.gridsterItem=t,this.gridster=t.gridster,this.tryPattern={fromEast:this.tryWest,fromWest:this.tryEast,fromNorth:this.trySouth,fromSouth:this.tryNorth},this.fromSouth="fromSouth",this.fromNorth="fromNorth",this.fromEast="fromEast",this.fromWest="fromWest"}destroy(){this.gridster=this.gridsterItem=null}pushItems(t){return this.gridster.$options.pushResizeItems?this.push(this.gridsterItem,t):!1}restoreItems(){let t=0,e=this.pushedItems.length,i;for(;t<e;t++)i=this.pushedItems[t],i.$item.x=i.item.x||0,i.$item.y=i.item.y||0,i.$item.cols=i.item.cols||1,i.$item.row=i.item.row||1,i.setSize();this.pushedItems=[],this.pushedItemsPath=[]}setPushedItems(){let t=0,e=this.pushedItems.length,i;for(;t<e;t++)i=this.pushedItems[t],i.checkItemChanges(i.$item,i.item);this.pushedItems=[],this.pushedItemsPath=[]}checkPushBack(){let t=this.pushedItems.length-1,e=!1;for(;t>-1;t--)this.checkPushedItem(this.pushedItems[t],t)&&(e=!0);e&&this.checkPushBack()}push(t,e){let i=this.gridster.checkCollision(t.$item);if(i&&i!==!0&&i!==this.gridsterItem&&i.canBeResized()){if(this.tryPattern[e].call(this,i,t,e))return!0}else if(i===!1)return!0;return!1}trySouth(t,e,i){let s=t.$item.y,o=t.$item.rows;return t.$item.y=e.$item.y+e.$item.rows,t.$item.rows=o+s-t.$item.y,!this.gridster.checkCollisionTwoItems(t.$item,e.$item)&&!this.gridster.checkGridCollision(t.$item)?(t.setSize(),this.addToPushed(t),this.push(e,i),!0):(t.$item.y=s,t.$item.rows=o,!1)}tryNorth(t,e,i){let s=t.$item.rows;return t.$item.rows=e.$item.y-t.$item.y,!this.gridster.checkCollisionTwoItems(t.$item,e.$item)&&!this.gridster.checkGridCollision(t.$item)?(t.setSize(),this.addToPushed(t),this.push(e,i),!0):(t.$item.rows=s,!1)}tryEast(t,e,i){let s=t.$item.x,o=t.$item.cols;return t.$item.x=e.$item.x+e.$item.cols,t.$item.cols=o+s-t.$item.x,!this.gridster.checkCollisionTwoItems(t.$item,e.$item)&&!this.gridster.checkGridCollision(t.$item)?(t.setSize(),this.addToPushed(t),this.push(e,i),!0):(t.$item.x=s,t.$item.cols=o,!1)}tryWest(t,e,i){let s=t.$item.cols;return t.$item.cols=e.$item.x-t.$item.x,!this.gridster.checkCollisionTwoItems(t.$item,e.$item)&&!this.gridster.checkGridCollision(t.$item)?(t.setSize(),this.addToPushed(t),this.push(e,i),!0):(t.$item.cols=s,!1)}addToPushed(t){if(this.pushedItems.indexOf(t)<0)this.pushedItems.push(t),this.pushedItemsPath.push([{x:t.item.x||0,y:t.item.y||0,cols:t.item.cols||0,rows:t.item.rows||0},{x:t.$item.x,y:t.$item.y,cols:t.$item.cols,rows:t.$item.rows}]);else{let e=this.pushedItems.indexOf(t);this.pushedItemsPath[e].push({x:t.$item.x,y:t.$item.y,cols:t.$item.cols,rows:t.$item.rows})}}removeFromPushed(t){t>-1&&(this.pushedItems.splice(t,1),this.pushedItemsPath.splice(t,1))}checkPushedItem(t,e){let i=this.pushedItemsPath[e],s=i.length-2,o,n,a,l,h;for(;s>-1;s--)o=i[s],n=t.$item.x,a=t.$item.y,l=t.$item.cols,h=t.$item.rows,t.$item.x=o.x,t.$item.y=o.y,t.$item.cols=o.cols,t.$item.rows=o.rows,this.gridster.findItemWithItem(t.$item)?(t.$item.x=n,t.$item.y=a,t.$item.cols=l,t.$item.rows=h):(t.setSize(),i.splice(s+1,i.length-1-s));return i.length<2?(this.removeFromPushed(e),!0):!1}},He=class{zone;gridsterItem;gridster;lastMouse;itemBackup;resizeEventScrollType;directionFunction=null;resizeEnabled;resizableHandles;mousemove;mouseup;mouseleave;cancelOnBlur;touchmove;touchend;touchcancel;push;pushResize;minHeight;minWidth;offsetTop;offsetLeft;diffTop;diffLeft;diffRight;diffBottom;margin;outerMarginTop;outerMarginRight;outerMarginBottom;outerMarginLeft;originalClientX;originalClientY;top;left;bottom;right;width;height;newPosition;constructor(t,e,i){this.zone=i,this.gridsterItem=t,this.gridster=e,this.lastMouse={clientX:0,clientY:0},this.itemBackup=[0,0,0,0],this.resizeEventScrollType={west:!1,east:!1,north:!1,south:!1}}destroy(){this.gridster?.previewStyle(),this.gridster=this.gridsterItem=null}dragStart(t){if(t.which&&t.which!==1)return;this.gridster.options.resizable&&this.gridster.options.resizable.start&&this.gridster.options.resizable.start(this.gridsterItem.item,this.gridsterItem,t),t.stopPropagation(),t.preventDefault(),this.zone.runOutsideAngular(()=>{this.mousemove=this.gridsterItem.renderer.listen("document","mousemove",this.dragMove),this.touchmove=this.gridster.renderer.listen(this.gridster.el,"touchmove",this.dragMove)}),this.mouseup=this.gridsterItem.renderer.listen("document","mouseup",this.dragStop),this.mouseleave=this.gridsterItem.renderer.listen("document","mouseleave",this.dragStop),this.cancelOnBlur=this.gridsterItem.renderer.listen("window","blur",this.dragStop),this.touchend=this.gridsterItem.renderer.listen("document","touchend",this.dragStop),this.touchcancel=this.gridsterItem.renderer.listen("document","touchcancel",this.dragStop),this.gridsterItem.renderer.addClass(this.gridsterItem.el,"gridster-item-resizing"),this.lastMouse.clientX=t.clientX,this.lastMouse.clientY=t.clientY,this.left=this.gridsterItem.left,this.top=this.gridsterItem.top,this.originalClientX=t.clientX,this.originalClientY=t.clientY,this.width=this.gridsterItem.width,this.height=this.gridsterItem.height,this.bottom=this.gridsterItem.top+this.gridsterItem.height,this.right=this.gridsterItem.left+this.gridsterItem.width,this.margin=this.gridster.$options.margin,this.outerMarginTop=this.gridster.$options.outerMarginTop,this.outerMarginRight=this.gridster.$options.outerMarginRight,this.outerMarginBottom=this.gridster.$options.outerMarginBottom,this.outerMarginLeft=this.gridster.$options.outerMarginLeft,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.diffLeft=t.clientX+this.offsetLeft-this.left,this.diffRight=t.clientX+this.offsetLeft-this.right,this.diffTop=t.clientY+this.offsetTop-this.top,this.diffBottom=t.clientY+this.offsetTop-this.bottom,this.minHeight=this.gridster.positionYToPixels(this.gridsterItem.$item.minItemRows||this.gridster.$options.minItemRows)-this.margin,this.minWidth=this.gridster.positionXToPixels(this.gridsterItem.$item.minItemCols||this.gridster.$options.minItemCols)-this.margin,this.gridster.movingItem=this.gridsterItem.$item,this.gridster.previewStyle(),this.push=new oe(this.gridsterItem),this.pushResize=new Ae(this.gridsterItem),this.gridster.dragInProgress=!0,this.gridster.updateGrid();let{classList:e}=t.target;e.contains("handle-n")?(this.resizeEventScrollType.north=!0,this.directionFunction=this.handleNorth):e.contains("handle-w")?this.gridster.$options.dirType===O.RTL?(this.resizeEventScrollType.east=!0,this.directionFunction=this.handleEast):(this.resizeEventScrollType.west=!0,this.directionFunction=this.handleWest):e.contains("handle-s")?(this.resizeEventScrollType.south=!0,this.directionFunction=this.handleSouth):e.contains("handle-e")?this.gridster.$options.dirType===O.RTL?(this.resizeEventScrollType.west=!0,this.directionFunction=this.handleWest):(this.resizeEventScrollType.east=!0,this.directionFunction=this.handleEast):e.contains("handle-nw")?this.gridster.$options.dirType===O.RTL?(this.resizeEventScrollType.north=!0,this.resizeEventScrollType.east=!0,this.directionFunction=this.handleNorthEast):(this.resizeEventScrollType.north=!0,this.resizeEventScrollType.west=!0,this.directionFunction=this.handleNorthWest):e.contains("handle-ne")?this.gridster.$options.dirType===O.RTL?(this.resizeEventScrollType.north=!0,this.resizeEventScrollType.west=!0,this.directionFunction=this.handleNorthWest):(this.resizeEventScrollType.north=!0,this.resizeEventScrollType.east=!0,this.directionFunction=this.handleNorthEast):e.contains("handle-sw")?this.gridster.$options.dirType===O.RTL?(this.resizeEventScrollType.south=!0,this.resizeEventScrollType.east=!0,this.directionFunction=this.handleSouthEast):(this.resizeEventScrollType.south=!0,this.resizeEventScrollType.west=!0,this.directionFunction=this.handleSouthWest):e.contains("handle-se")&&(this.gridster.$options.dirType===O.RTL?(this.resizeEventScrollType.south=!0,this.resizeEventScrollType.west=!0,this.directionFunction=this.handleSouthWest):(this.resizeEventScrollType.south=!0,this.resizeEventScrollType.east=!0,this.directionFunction=this.handleSouthEast))}dragMove=t=>{if(this.directionFunction===null)throw new Error("The `directionFunction` has not been set before calling `dragMove`.");t.stopPropagation(),t.preventDefault(),z.checkTouchEvent(t),this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,Ki(this.gridster,this.left,this.top,this.width,this.height,t,this.lastMouse,this.directionFunction,!0,this.resizeEventScrollType);let e=this.gridster.options.scale||1;this.directionFunction({clientX:this.originalClientX+(t.clientX-this.originalClientX)/e,clientY:this.originalClientY+(t.clientY-this.originalClientY)/e}),this.lastMouse.clientX=t.clientX,this.lastMouse.clientY=t.clientY,this.zone.run(()=>{this.gridster.updateGrid()})};dragStop=t=>{t.stopPropagation(),t.preventDefault(),Ji(),this.mousemove(),this.mouseup(),this.mouseleave(),this.cancelOnBlur(),this.touchmove(),this.touchend(),this.touchcancel(),this.gridster.dragInProgress=!1,this.gridster.updateGrid(),this.gridster.options.resizable&&this.gridster.options.resizable.stop?Promise.resolve(this.gridster.options.resizable.stop(this.gridsterItem.item,this.gridsterItem,t)).then(this.makeResize,this.cancelResize):this.makeResize(),setTimeout(()=>{this.gridsterItem.renderer.removeClass(this.gridsterItem.el,"gridster-item-resizing"),this.gridster&&(this.gridster.movingItem=null,this.gridster.previewStyle())})};cancelResize=()=>{this.gridsterItem.$item.cols=this.gridsterItem.item.cols||1,this.gridsterItem.$item.rows=this.gridsterItem.item.rows||1,this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.gridsterItem.setSize(),this.push.restoreItems(),this.pushResize.restoreItems(),this.push.destroy(),this.push=null,this.pushResize.destroy(),this.pushResize=null};makeResize=()=>{this.gridsterItem.setSize(),this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.push.setPushedItems(),this.pushResize.setPushedItems(),this.push.destroy(),this.push=null,this.pushResize.destroy(),this.pushResize=null};handleNorth=t=>{this.top=t.clientY+this.offsetTop-this.diffTop,this.height=this.bottom-this.top,this.minHeight>this.height?(this.height=this.minHeight,this.top=this.bottom-this.minHeight):this.gridster.options.enableBoundaryControl&&(this.top=Math.max(0,this.top),this.height=this.bottom-this.top);let e=this.gridster.options.pushItems?this.margin:0;if(this.newPosition=this.gridster.pixelsToPositionY(this.top+e,Math.floor),this.gridsterItem.$item.y!==this.newPosition){if(this.itemBackup[1]=this.gridsterItem.$item.y,this.itemBackup[3]=this.gridsterItem.$item.rows,this.gridsterItem.$item.rows+=this.gridsterItem.$item.y-this.newPosition,this.gridsterItem.$item.y=this.newPosition,this.pushResize.pushItems(this.pushResize.fromSouth),this.push.pushItems(this.push.fromSouth,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item)){this.gridsterItem.$item.y=this.itemBackup[1],this.gridsterItem.$item.rows=this.itemBackup[3],this.top=this.gridster.positionYToPixels(this.gridsterItem.$item.y),this.setItemTop(this.gridster.positionYToPixels(this.gridsterItem.$item.y)),this.setItemHeight(this.gridster.positionYToPixels(this.gridsterItem.$item.rows)-this.margin);return}else this.gridster.previewStyle();this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemTop(this.top),this.setItemHeight(this.height)};handleWest=t=>{let e=this.gridster.$options.dirType===O.RTL?this.originalClientX+(this.originalClientX-t.clientX):t.clientX;this.left=e+this.offsetLeft-this.diffLeft,this.width=this.right-this.left,this.minWidth>this.width?(this.width=this.minWidth,this.left=this.right-this.minWidth):this.gridster.options.enableBoundaryControl&&(this.left=Math.max(0,this.left),this.width=this.right-this.left);let i=this.gridster.options.pushItems?this.margin:0;if(this.newPosition=this.gridster.pixelsToPositionX(this.left+i,Math.floor),this.gridsterItem.$item.x!==this.newPosition){if(this.itemBackup[0]=this.gridsterItem.$item.x,this.itemBackup[2]=this.gridsterItem.$item.cols,this.gridsterItem.$item.cols+=this.gridsterItem.$item.x-this.newPosition,this.gridsterItem.$item.x=this.newPosition,this.pushResize.pushItems(this.pushResize.fromEast),this.push.pushItems(this.push.fromEast,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item)){this.gridsterItem.$item.x=this.itemBackup[0],this.gridsterItem.$item.cols=this.itemBackup[2],this.left=this.gridster.positionXToPixels(this.gridsterItem.$item.x),this.setItemLeft(this.gridster.positionXToPixels(this.gridsterItem.$item.x)),this.setItemWidth(this.gridster.positionXToPixels(this.gridsterItem.$item.cols)-this.margin);return}else this.gridster.previewStyle();this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemLeft(this.left),this.setItemWidth(this.width)};handleSouth=t=>{if(this.height=t.clientY+this.offsetTop-this.diffBottom-this.top,this.minHeight>this.height&&(this.height=this.minHeight),this.bottom=this.top+this.height,this.gridster.options.enableBoundaryControl){let i=this.outerMarginBottom??this.margin,s=this.gridster.el.getBoundingClientRect();this.bottom=Math.min(this.bottom,s.bottom-s.top-2*i),this.height=this.bottom-this.top}let e=this.gridster.options.pushItems?0:this.margin;if(this.newPosition=this.gridster.pixelsToPositionY(this.bottom+e,Math.ceil),this.gridsterItem.$item.y+this.gridsterItem.$item.rows!==this.newPosition){if(this.itemBackup[3]=this.gridsterItem.$item.rows,this.gridsterItem.$item.rows=this.newPosition-this.gridsterItem.$item.y,this.pushResize.pushItems(this.pushResize.fromNorth),this.push.pushItems(this.push.fromNorth,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item)){this.gridsterItem.$item.rows=this.itemBackup[3],this.setItemHeight(this.gridster.positionYToPixels(this.gridsterItem.$item.rows)-this.margin);return}else this.gridster.previewStyle();this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemHeight(this.height)};handleEast=t=>{let e=this.gridster.$options.dirType===O.RTL?this.originalClientX+(this.originalClientX-t.clientX):t.clientX;if(this.width=e+this.offsetLeft-this.diffRight-this.left,this.minWidth>this.width&&(this.width=this.minWidth),this.right=this.left+this.width,this.gridster.options.enableBoundaryControl){let s=this.outerMarginRight??this.margin,o=this.gridster.el.getBoundingClientRect();this.right=Math.min(this.right,o.right-o.left-2*s),this.width=this.right-this.left}let i=this.gridster.options.pushItems?0:this.margin;if(this.newPosition=this.gridster.pixelsToPositionX(this.right+i,Math.ceil),this.gridsterItem.$item.x+this.gridsterItem.$item.cols!==this.newPosition){if(this.itemBackup[2]=this.gridsterItem.$item.cols,this.gridsterItem.$item.cols=this.newPosition-this.gridsterItem.$item.x,this.pushResize.pushItems(this.pushResize.fromWest),this.push.pushItems(this.push.fromWest,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item)){this.gridsterItem.$item.cols=this.itemBackup[2],this.setItemWidth(this.gridster.positionXToPixels(this.gridsterItem.$item.cols)-this.margin);return}else this.gridster.previewStyle();this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemWidth(this.width)};handleNorthWest=t=>{this.handleNorth(t),this.handleWest(t)};handleNorthEast=t=>{this.handleNorth(t),this.handleEast(t)};handleSouthWest=t=>{this.handleSouth(t),this.handleWest(t)};handleSouthEast=t=>{this.handleSouth(t),this.handleEast(t)};toggle(){this.resizeEnabled=this.gridsterItem.canBeResized(),this.resizableHandles=this.gridsterItem.getResizableHandles()}dragStartDelay(t){if(z.checkTouchEvent(t),!this.gridster.$options.resizable.delayStart){this.dragStart(t);return}let e=setTimeout(()=>{this.dragStart(t),c()},this.gridster.$options.resizable.delayStart),{cancelMouse:i,cancelMouseLeave:s,cancelOnBlur:o,cancelTouchMove:n,cancelTouchEnd:a,cancelTouchCancel:l}=this.zone.runOutsideAngular(()=>{let p=this.gridsterItem.renderer.listen("document","mouseup",c),f=this.gridsterItem.renderer.listen("document","mouseleave",c),S=this.gridsterItem.renderer.listen("window","blur",c),D=this.gridsterItem.renderer.listen("document","touchmove",h),E=this.gridsterItem.renderer.listen("document","touchend",c),R=this.gridsterItem.renderer.listen("document","touchcancel",c);return{cancelMouse:p,cancelMouseLeave:f,cancelOnBlur:S,cancelTouchMove:D,cancelTouchEnd:E,cancelTouchCancel:R}});function h(p){z.checkTouchEvent(p),(Math.abs(p.clientX-t.clientX)>9||Math.abs(p.clientY-t.clientY)>9)&&c()}function c(){clearTimeout(e),o(),i(),s(),n(),a(),l()}}setItemTop(t){this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,this.left,t)}setItemLeft(t){this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,t,this.top)}setItemHeight(t){this.gridsterItem.renderer.setStyle(this.gridsterItem.el,"height",t+"px")}setItemWidth(t){this.gridsterItem.renderer.setStyle(this.gridsterItem.el,"width",t+"px")}},ss=(()=>{class r{renderer;zone;item;itemInit=new I;itemChange=new I;itemResize=new I;$item;el;gridster;top;left;width;height;drag;resize;notPlaced;init;get zIndex(){return this.getLayerIndex()+this.gridster.$options.baseLayerIndex}constructor(e,i,s,o){this.renderer=s,this.zone=o,this.el=e.nativeElement,this.$item={cols:-1,rows:-1,x:-1,y:-1},this.gridster=i,this.drag=new Be(this,i,this.zone),this.resize=new He(this,i,this.zone)}ngOnInit(){this.gridster.addItem(this)}ngOnChanges(e){e.item&&(this.updateOptions(),this.init||this.gridster.calculateLayout$.next()),e.item&&e.item.previousValue&&this.setSize()}updateOptions(){this.$item=z.merge(this.$item,this.item,{cols:void 0,rows:void 0,x:void 0,y:void 0,layerIndex:void 0,dragEnabled:void 0,resizeEnabled:void 0,compactEnabled:void 0,maxItemRows:void 0,minItemRows:void 0,maxItemCols:void 0,minItemCols:void 0,maxItemArea:void 0,minItemArea:void 0,resizableHandles:{s:void 0,e:void 0,n:void 0,w:void 0,se:void 0,ne:void 0,sw:void 0,nw:void 0}})}ngOnDestroy(){this.gridster.removeItem(this),this.drag.destroy(),this.resize.destroy(),this.gridster=this.drag=this.resize=null}setSize(){this.renderer.setStyle(this.el,"display",this.notPlaced?"":"block"),this.gridster.gridRenderer.updateItem(this.el,this.$item,this.renderer),this.updateItemSize()}updateItemSize(){let e=this.$item.y*this.gridster.curRowHeight,i=this.$item.x*this.gridster.curColWidth,s=this.$item.cols*this.gridster.curColWidth-this.gridster.$options.margin,o=this.$item.rows*this.gridster.curRowHeight-this.gridster.$options.margin;this.top=e,this.left=i,!this.init&&s>0&&o>0&&(this.init=!0,this.item.initCallback&&this.item.initCallback(this.item,this),this.gridster.options.itemInitCallback&&this.gridster.options.itemInitCallback(this.item,this),this.itemInit.next({item:this.item,itemComponent:this}),this.gridster.$options.scrollToNewItems&&this.el.scrollIntoView(!1)),(s!==this.width||o!==this.height)&&(this.width=s,this.height=o,this.gridster.options.itemResizeCallback&&this.gridster.options.itemResizeCallback(this.item,this),this.itemResize.next({item:this.item,itemComponent:this}))}itemChanged(){this.gridster.options.itemChangeCallback&&this.gridster.options.itemChangeCallback(this.item,this),this.itemChange.next({item:this.item,itemComponent:this})}checkItemChanges(e,i){e.rows===i.rows&&e.cols===i.cols&&e.x===i.x&&e.y===i.y||(this.gridster.checkCollision(this.$item)?(this.$item.x=i.x||0,this.$item.y=i.y||0,this.$item.cols=i.cols||1,this.$item.rows=i.rows||1,this.setSize()):(this.item.cols=this.$item.cols,this.item.rows=this.$item.rows,this.item.x=this.$item.x,this.item.y=this.$item.y,this.gridster.calculateLayout$.next(),this.itemChanged()))}canBeDragged(){let e=this.gridster.$options.draggable.enabled,i=this.$item.dragEnabled===void 0?e:this.$item.dragEnabled;return!this.gridster.mobile&&e&&i}canBeResized(){let e=this.gridster.$options.resizable.enabled,i=this.$item.resizeEnabled===void 0?e:this.$item.resizeEnabled;return!this.gridster.mobile&&e&&i}getResizableHandles(){let e=this.gridster.$options.resizable.handles,i=this.$item.resizableHandles;return i===void 0?e:W(W({},e),i)}bringToFront(e){if(e&&e<=0)return;let i=this.getLayerIndex(),s=this.gridster.$options.maxLayerIndex;if(i<s){let o=e?i+e:s;this.item.layerIndex=this.$item.layerIndex=o>s?s:o}}sendToBack(e){if(e&&e<=0)return;let i=this.getLayerIndex();if(i>0){let s=e?i-e:0;this.item.layerIndex=this.$item.layerIndex=s<0?0:s}}getLayerIndex(){return this.item.layerIndex!==void 0?this.item.layerIndex:this.gridster.$options.defaultLayerIndex!==void 0?this.gridster.$options.defaultLayerIndex:0}static \u0275fac=function(i){return new(i||r)(F(L),F(Ge),F(at),F(M))};static \u0275cmp=k({type:r,selectors:[["gridster-item"]],hostVars:2,hostBindings:function(i,s){i&2&&bt("z-index",s.zIndex)},inputs:{item:"item"},outputs:{itemInit:"itemInit",itemChange:"itemChange",itemResize:"itemResize"},features:[ut],ngContentSelectors:Ui,decls:9,vars:8,consts:[[1,"gridster-item-resizable-handler","handle-s"],[1,"gridster-item-resizable-handler","handle-e"],[1,"gridster-item-resizable-handler","handle-n"],[1,"gridster-item-resizable-handler","handle-w"],[1,"gridster-item-resizable-handler","handle-se"],[1,"gridster-item-resizable-handler","handle-ne"],[1,"gridster-item-resizable-handler","handle-sw"],[1,"gridster-item-resizable-handler","handle-nw"],[1,"gridster-item-resizable-handler","handle-s",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-e",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-n",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-w",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-se",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-ne",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-sw",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-nw",3,"mousedown","touchstart"]],template:function(i,s){i&1&&(Qt(),te(0),G(1,ar,1,0,"div",0),G(2,lr,1,0,"div",1),G(3,hr,1,0,"div",2),G(4,cr,1,0,"div",3),G(5,dr,1,0,"div",4),G(6,pr,1,0,"div",5),G(7,ur,1,0,"div",6),G(8,gr,1,0,"div",7)),i&2&&(y(),X(s.resize.resizableHandles!=null&&s.resize.resizableHandles.s&&s.resize.resizeEnabled?1:-1),y(),X(s.resize.resizableHandles!=null&&s.resize.resizableHandles.e&&s.resize.resizeEnabled?2:-1),y(),X(s.resize.resizableHandles!=null&&s.resize.resizableHandles.n&&s.resize.resizeEnabled?3:-1),y(),X(s.resize.resizableHandles!=null&&s.resize.resizableHandles.w&&s.resize.resizeEnabled?4:-1),y(),X(s.resize.resizableHandles!=null&&s.resize.resizableHandles.se&&s.resize.resizeEnabled?5:-1),y(),X(s.resize.resizableHandles!=null&&s.resize.resizableHandles.ne&&s.resize.resizeEnabled?6:-1),y(),X(s.resize.resizableHandles!=null&&s.resize.resizableHandles.sw&&s.resize.resizeEnabled?7:-1),y(),X(s.resize.resizableHandles!=null&&s.resize.resizableHandles.nw&&s.resize.resizeEnabled?8:-1))},styles:[`gridster-item{box-sizing:border-box;z-index:1;position:absolute;overflow:hidden;transition:.3s;display:none;background:#fff;-webkit-user-select:text;user-select:text}gridster-item.gridster-item-moving{cursor:move}gridster-item.gridster-item-resizing,gridster-item.gridster-item-moving{transition:0s;z-index:2;box-shadow:0 0 5px 5px #0003,0 6px 10px #00000024,0 1px 18px #0000001f}.gridster-item-resizable-handler{position:absolute;z-index:2}.gridster-item-resizable-handler.handle-n{cursor:ns-resize;height:10px;right:0;top:0;left:0}.gridster-item-resizable-handler.handle-e{cursor:ew-resize;width:10px;bottom:0;right:0;top:0}.gridster-item-resizable-handler.handle-s{cursor:ns-resize;height:10px;right:0;bottom:0;left:0}.gridster-item-resizable-handler.handle-w{cursor:ew-resize;width:10px;left:0;top:0;bottom:0}.gridster-item-resizable-handler.handle-ne{cursor:ne-resize;width:10px;height:10px;right:0;top:0}.gridster-item-resizable-handler.handle-nw{cursor:nw-resize;width:10px;height:10px;left:0;top:0}.gridster-item-resizable-handler.handle-se{cursor:se-resize;width:0;height:0;right:0;bottom:0;border-style:solid;border-width:0 0 10px 10px;border-color:transparent}.gridster-item-resizable-handler.handle-sw{cursor:sw-resize;width:10px;height:10px;left:0;bottom:0}gridster-item:hover .gridster-item-resizable-handler.handle-se{border-color:transparent transparent #ccc}
`],encapsulation:2})}return r})();var ct=function(r){return r[r.Dropdown=0]="Dropdown",r[r.Button=1]="Button",r}(ct||{}),tt=function(r){return r[r.NewGame=0]="NewGame",r[r.Difficulty=1]="Difficulty",r[r.Rules=2]="Rules",r}(tt||{}),et=function(r){return r[r.Easy=0]="Easy",r[r.Medium=1]="Medium",r[r.Hard=2]="Hard",r}(et||{}),Bt=function(r){return r[r.Car=0]="Car",r[r.Truck=1]="Truck",r[r.GreenCar=2]="GreenCar",r}(Bt||{}),ne=function(r){return r[r.Horizontal=0]="Horizontal",r[r.Vertical=1]="Vertical",r}(ne||{});var mt=6,dt=6,rs=mt*dt,ae=3;function je(){return[{name:"New Game",id:tt.NewGame,type:ct.Button},{name:"Difficulty",id:tt.Difficulty,type:ct.Dropdown,options:[{name:"Easy",id:et.Easy},{name:"Medium",id:et.Medium},{name:"Hard",id:et.Hard}]},{name:"How to Play?",id:tt.Rules,type:ct.Button}]}function os(){return{title:"How to Play?",content:`<h2>Rush Hour: Gridlock Escape!</h2>
      <p><b>Goal:</b> Get your <span style="color: green; font-weight: bold;">green car</span> off the board via the right exit.</p>
      <hr>
      <h3>Setup</h3>
      <ul>
          <li><b>Board:</b> 6x6 grid.</li>
          <li><b>Pieces:</b> Cars (2 squares), Trucks (3 squares), and your special <span style="color: green; font-weight: bold;">Green Car</span> (2 squares).</li>
          <li>Each challenge has a unique starting layout.</li>
      </ul>
      <hr>
      <h3>How to Move</h3>
      <ul>
          <li><b>Straight Only:</b> Vehicles slide forward/backward (horizontal) or up/down (vertical). No turns.</li>
          <li><b>Clear Path:</b> Move pieces only if squares are empty.</li>
          <li><b>No Overlap:</b> Pieces can't land on others. All stay on the board until your green car exits.</li>
          <li><b>One Move:</b> Move one vehicle per turn.</li>
      </ul>
      <hr>
      <h3>Winning</h3>
      <p>You win when your <span style="color: green; font-weight: bold;">green car</span> slides completely off the board through the exit!</p>`}}function vr(r,t){if(r&1){let e=N();v(0,"gridster-item",4),T("itemChange",function(s){b(e);let o=g();return x(o.itemChange(s))})("itemDragStart",function(s){b(e);let o=g();return x(o.itemDragStart(s))})("itemDragStop",function(s){b(e);let o=g();return x(o.itemDragEnd(s))}),_()}if(r&2){let e=t.$implicit;bt("background-color",e.color),H("item",e)}}var ns=(()=>{class r{set config(e){e&&e.length?this.grid=this.getGameGrid(e):this.grid=[]}exitRow=ae;completeGrid=new I;reloadGrid=new I;options;grid=[];constructor(){this.options={gridType:m.Fit,enableBoundaryControl:!0,swap:!0,pushItems:!1,minCols:dt,maxCols:dt,minRows:mt,maxRows:mt,draggable:{enabled:!0},resizable:{enabled:!1}}}getCarsPlaceholderArray(e){let i=!1,o=new Array(dt).fill(null).map(n=>new Array(mt).fill(null));return e.forEach(n=>{if(o[n.x][n.y]=n.id,n.rows>1)for(let a=1;a<n.rows;a++)n.x+a>dt-1&&(i=!0,this.reloadGrid.emit()),o[n.x+a][n.y]=n.id;if(n.cols>1)for(let a=1;a<n.cols;a++)n.y+a>mt-1&&(i=!0,this.reloadGrid.emit()),o[n.x][n.y+a]=n.id}),i?null:o}getGameGrid(e){let i=this.getCarsPlaceholderArray(e);if(!i)return[];let s=[],o=[];for(let n=0;n<mt;n++)for(let a=0;a<dt;)if(i[n][a]!=null){let l=i[n][a];if(s.includes(l)){a++;continue}let h=e.find(p=>p.id===i[n][a]),{cols:c}=h;o.push(st(W({},h),{dragEnabled:!0})),s.push(h.id),a+=c}else a++;return o}itemChange=e=>{let{type:i,x:s,y:o}=e.item;i===Bt.GreenCar&&s===this.exitRow&&o===dt-1&&this.completeGrid.emit()};itemDragStart=e=>{console.log(e)};itemDragEnd=e=>{console.log(e)};static \u0275fac=function(i){return new(i||r)};static \u0275cmp=k({type:r,selectors:[["grid"]],inputs:{config:"config",exitRow:"exitRow"},outputs:{completeGrid:"completeGrid",reloadGrid:"reloadGrid"},decls:5,vars:3,consts:[[1,"grid"],[1,"grid__container",3,"options"],[1,"grid__item",3,"backgroundColor","item"],[1,"grid__exit"],[1,"grid__item",3,"itemChange","itemDragStart","itemDragStop","item"]],template:function(i,s){i&1&&(v(0,"div",0)(1,"gridster",1),lt(2,vr,1,3,"gridster-item",2,Jt),_(),$(4,"div",3),_()),i&2&&(y(),H("options",s.options),y(),ht(s.grid),y(2),bt("top","calc(100% / 6 * "+s.exitRow+")"))},dependencies:[Ge,ss],styles:[".grid[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:row;width:100%;height:100%}.grid__container[_ngcontent-%COMP%]{background-color:#e7e7ec}.grid__item[_ngcontent-%COMP%]{border-radius:8px}.grid__exit[_ngcontent-%COMP%]{position:absolute;width:4px;right:0;background-color:red;height:16.393442623%}"]})}return r})();var le=function(r){return r.GameCache="GameCache",r}(le||{}),as=(()=>{class r{setItem(e,i){let s=JSON.stringify(i),o=btoa(s);localStorage.setItem(e,o)}getItem(e){let i=localStorage.getItem(e);if(i){let s=atob(i);return JSON.parse(s)}return null}removeItem(e){localStorage.removeItem(e)}static \u0275fac=function(i){return new(i||r)};static \u0275prov=w({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var wr=50,Cr=1e3,br=3,ls=(()=>{class r{startTime=0;intervalId;displayTime=K("0.000s");ngOnInit(){this.startTime=performance.now(),this.intervalId=setInterval(()=>{let e=performance.now()-this.startTime;this.displayTime.set((e/Cr).toFixed(br)+"s")},wr)}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=k({type:r,selectors:[["loader"]],decls:10,vars:1,consts:[[1,"container"],["viewBox","0 0 100 50","xmlns","http://www.w3.org/2000/svg",1,"container__car"],["x","10","y","20","width","80","height","20","rx","4","fill","green"],["points","30,20 40,10 60,10 70,20","fill","#2ecc71"],["x","42","y","12","width","6","height","8","fill","#ecf0f1"],["x","52","y","12","width","6","height","8","fill","#ecf0f1"],["cx","25","cy","42","r","6","fill","#333"],["cx","75","cy","42","r","6","fill","#333"],[1,"container__counter"]],template:function(i,s){i&1&&(v(0,"div",0),Pi(),v(1,"svg",1),$(2,"rect",2)(3,"polygon",3)(4,"rect",4)(5,"rect",5)(6,"circle",6)(7,"circle",7),_(),Ei(),v(8,"div",8),rt(9),_()()),i&2&&(y(9),xt(" ",s.displayTime()," "))},styles:[".container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center;position:relative;gap:8px}.container__car[_ngcontent-%COMP%]{width:100px;height:50px;transform-origin:center center;position:absolute;animation:_ngcontent-%COMP%_drive-horizontal 4s linear infinite}.container__counter[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}@keyframes _ngcontent-%COMP%_drive-horizontal{0%{transform:translate(-200%) scaleX(1)}49.9%{transform:translate(200%) scaleX(1)}50%{transform:translate(200%) scaleX(-1)}to{transform:translate(-200%) scaleX(-1)}}"]})}return r})();var Ue;try{Ue=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Ue=!1}var ft=(()=>{class r{_platformId=d(Ti);isBrowser=this._platformId?Gi(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||Ue)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(i){return new(i||r)};static \u0275prov=w({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Ze;function xr(){if(Ze==null){let r=typeof document<"u"?document.head:null;Ze=!!(r&&(r.createShadowRoot||r.attachShadow))}return Ze}function he(r){if(xr()){let t=r.getRootNode?r.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function pt(r){return r.composedPath?r.composedPath()[0]:r.target}function qe(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var ce=new WeakMap,At=(()=>{class r{_appRef;_injector=d(q);_environmentInjector=d(wt);load(e){let i=this._appRef=this._appRef||this._injector.get(Kt),s=ce.get(i);s||(s={loaders:new Set,refs:[]},ce.set(i,s),i.onDestroy(()=>{ce.get(i)?.refs.forEach(o=>o.destroy()),ce.delete(i)})),s.loaders.has(e)||(s.loaders.add(e),s.refs.push(re(e,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(i){return new(i||r)};static \u0275prov=w({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function P(r){return r==null?"":typeof r=="string"?r:`${r}px`}function Ke(r){return Array.isArray(r)?r:[r]}function Je(r,t=0){return Sr(r)?Number(r):arguments.length===2?t:0}function Sr(r){return!isNaN(parseFloat(r))&&!isNaN(Number(r))}function it(r){return r instanceof L?r.nativeElement:r}var Rr=new Z("cdk-dir-doc",{providedIn:"root",factory:Dr});function Dr(){return d(A)}var Ir=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function Pr(r){let t=r?.toLowerCase()||"";return t==="auto"&&typeof navigator<"u"&&navigator?.language?Ir.test(navigator.language)?"rtl":"ltr":t==="rtl"?"rtl":"ltr"}var de=(()=>{class r{get value(){return this.valueSignal()}valueSignal=K("ltr");change=new I;constructor(){let e=d(Rr,{optional:!0});if(e){let i=e.body?e.body.dir:null,s=e.documentElement?e.documentElement.dir:null;this.valueSignal.set(Pr(i||s||"ltr"))}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(i){return new(i||r)};static \u0275prov=w({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var _t;function hs(){if(_t==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return _t=!1,_t;if("scrollBehavior"in document.documentElement.style)_t=!0;else{let r=Element.prototype.scrollTo;r?_t=!/\{\s*\[native code\]\s*\}/.test(r.toString()):_t=!1}}return _t}var Er=20,pe=(()=>{class r{_ngZone=d(M);_platform=d(ft);_renderer=d(Q).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new u;_scrolledCount=0;scrollContainers=new Map;register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=Er){return this._platform.isBrowser?new It(i=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let s=e>0?this._scrolled.pipe(Pe(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):wi()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){let s=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(Zt(o=>!o||s.indexOf(o)>-1))}getAncestorScrollContainers(e){let i=[];return this.scrollContainers.forEach((s,o)=>{this._scrollableContainsElement(o,e)&&i.push(o)}),i}_scrollableContainsElement(e,i){let s=it(i),o=e.getElementRef().nativeElement;do if(s==o)return!0;while(s=s.parentElement);return!1}static \u0275fac=function(i){return new(i||r)};static \u0275prov=w({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var kr=20,vt=(()=>{class r{_platform=d(ft);_listeners;_viewportSize;_change=new u;_document=d(A,{optional:!0});constructor(){let e=d(M),i=d(Q).createRenderer(null,null);e.runOutsideAngular(()=>{if(this._platform.isBrowser){let s=o=>this._change.next(o);this._listeners=[i.listen("window","resize",s),i.listen("window","orientationchange",s)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(e=>e()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:i,height:s}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+s,right:e.left+i,height:s,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,i=this._getWindow(),s=e.documentElement,o=s.getBoundingClientRect(),n=-o.top||e.body.scrollTop||i.scrollY||s.scrollTop||0,a=-o.left||e.body.scrollLeft||i.scrollX||s.scrollLeft||0;return{top:n,left:a}}change(e=kr){return e>0?this._change.pipe(Pe(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static \u0275fac=function(i){return new(i||r)};static \u0275prov=w({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Ht=class{_attachedHost;attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;t!=null&&(this._attachedHost=null,t.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},Vt=class extends Ht{component;viewContainerRef;injector;projectableNodes;constructor(t,e,i,s){super(),this.component=t,this.viewContainerRef=e,this.injector=i,this.projectableNodes=s}},ue=class extends Ht{templateRef;viewContainerRef;context;injector;constructor(t,e,i,s){super(),this.templateRef=t,this.viewContainerRef=e,this.context=i,this.injector=s}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}},ti=class extends Ht{element;constructor(t){super(),this.element=t instanceof L?t.nativeElement:t}},ei=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(t){if(t instanceof Vt)return this._attachedPortal=t,this.attachComponentPortal(t);if(t instanceof ue)return this._attachedPortal=t,this.attachTemplatePortal(t);if(this.attachDomPortal&&t instanceof ti)return this._attachedPortal=t,this.attachDomPortal(t)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}},ge=class extends ei{outletElement;_appRef;_defaultInjector;constructor(t,e,i){super(),this.outletElement=t,this._appRef=e,this._defaultInjector=i}attachComponentPortal(t){let e;if(t.viewContainerRef){let i=t.injector||t.viewContainerRef.injector,s=i.get($i,null,{optional:!0})||void 0;e=t.viewContainerRef.createComponent(t.component,{index:t.viewContainerRef.length,injector:i,ngModuleRef:s,projectableNodes:t.projectableNodes||void 0}),this.setDisposeFn(()=>e.destroy())}else{let i=this._appRef,s=t.injector||this._defaultInjector||q.NULL,o=s.get(wt,i.injector);e=re(t.component,{elementInjector:s,environmentInjector:o,projectableNodes:t.projectableNodes||void 0}),i.attachView(e.hostView),this.setDisposeFn(()=>{i.viewCount>0&&i.detachView(e.hostView),e.destroy()})}return this.outletElement.appendChild(this._getComponentRootNode(e)),this._attachedPortal=t,e}attachTemplatePortal(t){let e=t.viewContainerRef,i=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return i.rootNodes.forEach(s=>this.outletElement.appendChild(s)),i.detectChanges(),this.setDisposeFn(()=>{let s=e.indexOf(i);s!==-1&&e.remove(s)}),this._attachedPortal=t,i}attachDomPortal=t=>{let e=t.element;e.parentNode;let i=this.outletElement.ownerDocument.createComment("dom-portal");e.parentNode.insertBefore(i,e),this.outletElement.appendChild(e),this._attachedPortal=t,super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(e,i)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}};var ii={},cs=(()=>{class r{_appId=d(ki);getId(e){return this._appId!=="ng"&&(e+=this._appId),ii.hasOwnProperty(e)||(ii[e]=0),`${e}${ii[e]++}`}static \u0275fac=function(i){return new(i||r)};static \u0275prov=w({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var ds=hs();function vs(r){return new me(r.get(vt),r.get(A))}var me=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(t,e){this._viewportRuler=t,this._document=e}attach(){}enable(){if(this._canBeEnabled()){let t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=P(-this._previousScrollPosition.left),t.style.top=P(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let t=this._document.documentElement,e=this._document.body,i=t.style,s=e.style,o=i.scrollBehavior||"",n=s.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),ds&&(i.scrollBehavior=s.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),ds&&(i.scrollBehavior=o,s.scrollBehavior=n)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let e=this._document.documentElement,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}};function ys(r,t){return new fe(r.get(pe),r.get(M),r.get(vt),t)}var fe=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(t,e,i,s){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=i,this._config=s}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(this._scrollSubscription)return;let t=this._scrollDispatcher.scrolled(0).pipe(Zt(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{let e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}};var Wt=class{enable(){}disable(){}attach(){}};function si(r,t){return t.some(e=>{let i=r.bottom<e.top,s=r.top>e.bottom,o=r.right<e.left,n=r.left>e.right;return i||s||o||n})}function ps(r,t){return t.some(e=>{let i=r.top<e.top,s=r.bottom>e.bottom,o=r.left<e.left,n=r.right>e.right;return i||s||o||n})}function ws(r,t){return new _e(r.get(pe),r.get(vt),r.get(M),t)}var _e=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(t,e,i,s){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this._config=s}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(!this._scrollSubscription){let t=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(t).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:s}=this._viewportRuler.getViewportSize();si(e,[{width:i,height:s,bottom:s,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},Cs=(()=>{class r{_injector=d(q);constructor(){}noop=()=>new Wt;close=e=>ys(this._injector,e);block=()=>vs(this._injector);reposition=e=>ws(this._injector,e);static \u0275fac=function(i){return new(i||r)};static \u0275prov=w({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),ve=class{positionStrategy;scrollStrategy=new Wt;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";disableAnimations;width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(t){if(t){let e=Object.keys(t);for(let i of e)t[i]!==void 0&&(this[i]=t[i])}}};var ye=class{connectionPair;scrollableViewProperties;constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}};var bs=(()=>{class r{_attachedOverlays=[];_document=d(A);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){let i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(i){return new(i||r)};static \u0275prov=w({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),xs=(()=>{class r extends bs{_ngZone=d(M);_renderer=d(Q).createRenderer(null,null);_cleanupKeydown;add(e){super.add(e),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=e=>{let i=this._attachedOverlays;for(let s=i.length-1;s>-1;s--)if(i[s]._keydownEvents.observers.length>0){this._ngZone.run(()=>i[s]._keydownEvents.next(e));break}};static \u0275fac=(()=>{let e;return function(s){return(e||(e=ke(r)))(s||r)}})();static \u0275prov=w({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Ss=(()=>{class r extends bs{_platform=d(ft);_ngZone=d(M);_renderer=d(Q).createRenderer(null,null);_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;_cleanups;add(e){if(super.add(e),!this._isAttached){let i=this._document.body,s={capture:!0},o=this._renderer;this._cleanups=this._ngZone.runOutsideAngular(()=>[o.listen(i,"pointerdown",this._pointerDownListener,s),o.listen(i,"click",this._clickListener,s),o.listen(i,"auxclick",this._clickListener,s),o.listen(i,"contextmenu",this._clickListener,s)]),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){this._isAttached&&(this._cleanups?.forEach(e=>e()),this._cleanups=void 0,this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}_pointerDownListener=e=>{this._pointerDownEventTarget=pt(e)};_clickListener=e=>{let i=pt(e),s=e.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:i;this._pointerDownEventTarget=null;let o=this._attachedOverlays.slice();for(let n=o.length-1;n>-1;n--){let a=o[n];if(a._outsidePointerEvents.observers.length<1||!a.hasAttached())continue;if(us(a.overlayElement,i)||us(a.overlayElement,s))break;let l=a._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>l.next(e)):l.next(e)}};static \u0275fac=(()=>{let e;return function(s){return(e||(e=ke(r)))(s||r)}})();static \u0275prov=w({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function us(r,t){let e=typeof ShadowRoot<"u"&&ShadowRoot,i=t;for(;i;){if(i===r)return!0;i=e&&i instanceof ShadowRoot?i.host:i.parentNode}return!1}var Rs=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275cmp=k({type:r,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(i,s){},styles:[`.cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0;touch-action:manipulation}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}@media(prefers-reduced-motion){.cdk-overlay-backdrop{transition-duration:1ms}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}
`],encapsulation:2,changeDetection:0})}return r})(),Ds=(()=>{class r{_platform=d(ft);_containerElement;_document=d(A);_styleLoader=d(At);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e="cdk-overlay-container";if(this._platform.isBrowser||qe()){let s=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let o=0;o<s.length;o++)s[o].remove()}let i=this._document.createElement("div");i.classList.add(e),qe()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}_loadStyles(){this._styleLoader.load(Rs)}static \u0275fac=function(i){return new(i||r)};static \u0275prov=w({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),ri=class{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(t,e,i,s){this._renderer=e,this._ngZone=i,this.element=t.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=e.listen(this.element,"click",s)}detach(){this._ngZone.runOutsideAngular(()=>{let t=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(t,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),t.style.pointerEvents="none",t.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}},we=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new u;_attachments=new u;_detachments=new u;_positionStrategy;_scrollStrategy;_locationChanges=J.EMPTY;_backdropRef=null;_detachContentMutationObserver;_detachContentAfterRenderRef;_previousHostParent;_keydownEvents=new u;_outsidePointerEvents=new u;_afterNextRenderRef;constructor(t,e,i,s,o,n,a,l,h,c=!1,p,f){this._portalOutlet=t,this._host=e,this._pane=i,this._config=s,this._ngZone=o,this._keyboardDispatcher=n,this._document=a,this._location=l,this._outsideClickDispatcher=h,this._animationsDisabled=c,this._injector=p,this._renderer=f,s.scrollStrategy&&(this._scrollStrategy=s.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=s.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=Ct(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._completeDetachContent(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof e?.onDestroy=="function"&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let t=this._portalOutlet.detach();return this._detachments.next(),this._completeDetachContent(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){let t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,t&&this._detachments.next(),this._detachments.complete(),this._completeDetachContent()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=W(W({},this._config),t),this._updateElementSize()}setDirection(t){this._config=st(W({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){let t=this._config.direction;return t?typeof t=="string"?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let t=this._pane.style;t.width=P(this._config.width),t.height=P(this._config.height),t.minWidth=P(this._config.minWidth),t.minHeight=P(this._config.minHeight),t.maxWidth=P(this._config.maxWidth),t.maxHeight=P(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){let t="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new ri(this._document,this._renderer,this._ngZone,e=>{this._backdropClick.next(e)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(t))}):this._backdropRef.element.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(t,e,i){let s=Ke(e||[]).filter(o=>!!o);s.length&&(i?t.classList.add(...s):t.classList.remove(...s))}_detachContentWhenEmpty(){let t=!1;try{this._detachContentAfterRenderRef=Ct(()=>{t=!0,this._detachContent()},{injector:this._injector})}catch(e){if(t)throw e;this._detachContent()}globalThis.MutationObserver&&this._pane&&(this._detachContentMutationObserver||=new globalThis.MutationObserver(()=>{this._detachContent()}),this._detachContentMutationObserver.observe(this._pane,{childList:!0}))}_detachContent(){(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),this._completeDetachContent())}_completeDetachContent(){this._detachContentAfterRenderRef?.destroy(),this._detachContentAfterRenderRef=void 0,this._detachContentMutationObserver?.disconnect()}_disposeScrollStrategy(){let t=this._scrollStrategy;t?.disable(),t?.detach?.()}},gs="cdk-overlay-connected-position-bounding-box",Tr=/([A-Za-z%]+)$/;function Is(r,t){return new Ce(t,r.get(vt),r.get(A),r.get(ft),r.get(Ds))}var Ce=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new u;_resizeSubscription=J.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(t,e,i,s,o){this._viewportRuler=e,this._document=i,this._platform=s,this._overlayContainer=o,this.setOrigin(t)}attach(t){this._overlayRef&&this._overlayRef,this._validatePositions(),t.hostElement.classList.add(gs),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._originRect,e=this._overlayRect,i=this._viewportRect,s=this._containerRect,o=[],n;for(let a of this._preferredPositions){let l=this._getOriginPoint(t,s,a),h=this._getOverlayPoint(l,e,a),c=this._getOverlayFit(h,e,i,a);if(c.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,l);return}if(this._canFitWithFlexibleDimensions(c,h,i)){o.push({position:a,origin:l,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(l,a)});continue}(!n||n.overlayFit.visibleArea<c.visibleArea)&&(n={overlayFit:c,overlayPoint:h,originPoint:l,position:a,overlayRect:e})}if(o.length){let a=null,l=-1;for(let h of o){let c=h.boundingBoxRect.width*h.boundingBoxRect.height*(h.position.weight||1);c>l&&(l=c,a=h)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(n.position,n.originPoint);return}this._applyPosition(n.position,n.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&yt(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(gs),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,t.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,i){let s;if(i.originX=="center")s=t.left+t.width/2;else{let n=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;s=i.originX=="start"?n:a}e.left<0&&(s-=e.left);let o;return i.originY=="center"?o=t.top+t.height/2:o=i.originY=="top"?t.top:t.bottom,e.top<0&&(o-=e.top),{x:s,y:o}}_getOverlayPoint(t,e,i){let s;i.overlayX=="center"?s=-e.width/2:i.overlayX==="start"?s=this._isRtl()?-e.width:0:s=this._isRtl()?0:-e.width;let o;return i.overlayY=="center"?o=-e.height/2:o=i.overlayY=="top"?0:-e.height,{x:t.x+s,y:t.y+o}}_getOverlayFit(t,e,i,s){let o=fs(e),{x:n,y:a}=t,l=this._getOffset(s,"x"),h=this._getOffset(s,"y");l&&(n+=l),h&&(a+=h);let c=0-n,p=n+o.width-i.width,f=0-a,S=a+o.height-i.height,D=this._subtractOverflows(o.width,c,p),E=this._subtractOverflows(o.height,f,S),R=D*E;return{visibleArea:R,isCompletelyWithinViewport:o.width*o.height===R,fitsInViewportVertically:E===o.height,fitsInViewportHorizontally:D==o.width}}_canFitWithFlexibleDimensions(t,e,i){if(this._hasFlexibleDimensions){let s=i.bottom-e.y,o=i.right-e.x,n=ms(this._overlayRef.getConfig().minHeight),a=ms(this._overlayRef.getConfig().minWidth),l=t.fitsInViewportVertically||n!=null&&n<=s,h=t.fitsInViewportHorizontally||a!=null&&a<=o;return l&&h}return!1}_pushOverlayOnScreen(t,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};let s=fs(e),o=this._viewportRect,n=Math.max(t.x+s.width-o.width,0),a=Math.max(t.y+s.height-o.height,0),l=Math.max(o.top-i.top-t.y,0),h=Math.max(o.left-i.left-t.x,0),c=0,p=0;return s.width<=o.width?c=h||-n:c=t.x<this._viewportMargin?o.left-i.left-t.x:0,s.height<=o.height?p=l||-a:p=t.y<this._viewportMargin?o.top-i.top-t.y:0,this._previousPushAmount={x:c,y:p},{x:t.x+c,y:t.y+p}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(t!==this._lastPosition||!this._lastScrollVisibility||!Or(this._lastScrollVisibility,i)){let s=new ye(t,i);this._positionChanges.next(s)}this._lastScrollVisibility=i}this._lastPosition=t,this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;let e=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,s=t.overlayY;t.overlayX==="center"?i="center":this._isRtl()?i=t.overlayX==="start"?"right":"left":i=t.overlayX==="start"?"left":"right";for(let o=0;o<e.length;o++)e[o].style.transformOrigin=`${i} ${s}`}_calculateBoundingBoxRect(t,e){let i=this._viewportRect,s=this._isRtl(),o,n,a;if(e.overlayY==="top")n=t.y,o=i.height-n+this._viewportMargin;else if(e.overlayY==="bottom")a=i.height-t.y+this._viewportMargin*2,o=i.height-a+this._viewportMargin;else{let S=Math.min(i.bottom-t.y+i.top,t.y),D=this._lastBoundingBoxSize.height;o=S*2,n=t.y-S,o>D&&!this._isInitialRender&&!this._growAfterOpen&&(n=t.y-D/2)}let l=e.overlayX==="start"&&!s||e.overlayX==="end"&&s,h=e.overlayX==="end"&&!s||e.overlayX==="start"&&s,c,p,f;if(h)f=i.width-t.x+this._viewportMargin*2,c=t.x-this._viewportMargin;else if(l)p=t.x,c=i.right-t.x;else{let S=Math.min(i.right-t.x+i.left,t.x),D=this._lastBoundingBoxSize.width;c=S*2,p=t.x-S,c>D&&!this._isInitialRender&&!this._growAfterOpen&&(p=t.x-D/2)}return{top:n,left:p,bottom:a,right:f,width:c,height:o}}_setBoundingBoxStyles(t,e){let i=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let s={};if(this._hasExactPosition())s.top=s.left="0",s.bottom=s.right=s.maxHeight=s.maxWidth="",s.width=s.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,n=this._overlayRef.getConfig().maxWidth;s.height=P(i.height),s.top=P(i.top),s.bottom=P(i.bottom),s.width=P(i.width),s.left=P(i.left),s.right=P(i.right),e.overlayX==="center"?s.alignItems="center":s.alignItems=e.overlayX==="end"?"flex-end":"flex-start",e.overlayY==="center"?s.justifyContent="center":s.justifyContent=e.overlayY==="bottom"?"flex-end":"flex-start",o&&(s.maxHeight=P(o)),n&&(s.maxWidth=P(n))}this._lastBoundingBoxSize=i,yt(this._boundingBox.style,s)}_resetBoundingBoxStyles(){yt(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){yt(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){let i={},s=this._hasExactPosition(),o=this._hasFlexibleDimensions,n=this._overlayRef.getConfig();if(s){let c=this._viewportRuler.getViewportScrollPosition();yt(i,this._getExactOverlayY(e,t,c)),yt(i,this._getExactOverlayX(e,t,c))}else i.position="static";let a="",l=this._getOffset(e,"x"),h=this._getOffset(e,"y");l&&(a+=`translateX(${l}px) `),h&&(a+=`translateY(${h}px)`),i.transform=a.trim(),n.maxHeight&&(s?i.maxHeight=P(n.maxHeight):o&&(i.maxHeight="")),n.maxWidth&&(s?i.maxWidth=P(n.maxWidth):o&&(i.maxWidth="")),yt(this._pane.style,i)}_getExactOverlayY(t,e,i){let s={top:"",bottom:""},o=this._getOverlayPoint(e,this._overlayRect,t);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),t.overlayY==="bottom"){let n=this._document.documentElement.clientHeight;s.bottom=`${n-(o.y+this._overlayRect.height)}px`}else s.top=P(o.y);return s}_getExactOverlayX(t,e,i){let s={left:"",right:""},o=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i));let n;if(this._isRtl()?n=t.overlayX==="end"?"left":"right":n=t.overlayX==="end"?"right":"left",n==="right"){let a=this._document.documentElement.clientWidth;s.right=`${a-(o.x+this._overlayRect.width)}px`}else s.left=P(o.x);return s}_getScrollVisibility(){let t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(s=>s.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:ps(t,i),isOriginOutsideView:si(t,i),isOverlayClipped:ps(e,i),isOverlayOutsideView:si(e,i)}}_subtractOverflows(t,...e){return e.reduce((i,s)=>i-Math.max(s,0),t)}_getNarrowedViewportRect(){let t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return e==="x"?t.offsetX==null?this._offsetX:t.offsetX:t.offsetY==null?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&Ke(t).forEach(e=>{e!==""&&this._appliedPanelClasses.indexOf(e)===-1&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){let t=this._origin;if(t instanceof L)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();let e=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+e,height:i,width:e}}};function yt(r,t){for(let e in t)t.hasOwnProperty(e)&&(r[e]=t[e]);return r}function ms(r){if(typeof r!="number"&&r!=null){let[t,e]=r.split(Tr);return!e||e==="px"?parseFloat(t):null}return r||null}function fs(r){return{top:Math.floor(r.top),right:Math.floor(r.right),bottom:Math.floor(r.bottom),left:Math.floor(r.left),width:Math.floor(r.width),height:Math.floor(r.height)}}function Or(r,t){return r===t?!0:r.isOriginClipped===t.isOriginClipped&&r.isOriginOutsideView===t.isOriginOutsideView&&r.isOverlayClipped===t.isOverlayClipped&&r.isOverlayOutsideView===t.isOverlayOutsideView}var _s="cdk-global-overlay-wrapper";function Ps(r){return new be}var be=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(t){let e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(_s),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:s,height:o,maxWidth:n,maxHeight:a}=i,l=(s==="100%"||s==="100vw")&&(!n||n==="100%"||n==="100vw"),h=(o==="100%"||o==="100vh")&&(!a||a==="100%"||a==="100vh"),c=this._xPosition,p=this._xOffset,f=this._overlayRef.getConfig().direction==="rtl",S="",D="",E="";l?E="flex-start":c==="center"?(E="center",f?D=p:S=p):f?c==="left"||c==="end"?(E="flex-end",S=p):(c==="right"||c==="start")&&(E="flex-start",D=p):c==="left"||c==="start"?(E="flex-start",S=p):(c==="right"||c==="end")&&(E="flex-end",D=p),t.position=this._cssPosition,t.marginLeft=l?"0":S,t.marginTop=h?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=l?"0":D,e.justifyContent=E,e.alignItems=h?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(_s),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}},Es=(()=>{class r{_injector=d(q);constructor(){}global(){return Ps()}flexibleConnectedTo(e){return Is(this._injector,e)}static \u0275fac=function(i){return new(i||r)};static \u0275prov=w({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function ks(r,t){r.get(At).load(Rs);let e=r.get(Ds),i=r.get(A),s=r.get(cs),o=r.get(Kt),n=r.get(de),a=i.createElement("div"),l=i.createElement("div");l.id=s.getId("cdk-overlay-"),l.classList.add("cdk-overlay-pane"),a.appendChild(l),e.getContainerElement().appendChild(a);let h=new ge(l,o,r),c=new ve(t),p=r.get(at,null,{optional:!0})||r.get(Q).createRenderer(null,null);return c.direction=c.direction||n.value,new we(h,a,l,c,r.get(M),r.get(xs),i,r.get(Bi),r.get(Ss),t?.disableAnimations??r.get(Oi,null,{optional:!0})==="NoopAnimations",r.get(wt),p)}var oi=(()=>{class r{scrollStrategies=d(Cs);_positionBuilder=d(Es);_injector=d(q);constructor(){}create(e){return ks(this._injector,e)}position(){return this._positionBuilder}static \u0275fac=function(i){return new(i||r)};static \u0275prov=w({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function Ts(r){return r.buttons===0||r.detail===0}function Os(r){let t=r.touches&&r.touches[0]||r.changedTouches&&r.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}function Ys(r){let t=r.cloneNode(!0),e=t.querySelectorAll("[id]"),i=r.nodeName.toLowerCase();t.removeAttribute("id");for(let s=0;s<e.length;s++)e[s].removeAttribute("id");return i==="canvas"?zs(r,t):(i==="input"||i==="select"||i==="textarea")&&$s(r,t),Ms("canvas",r,t,zs),Ms("input, textarea, select",r,t,$s),t}function Ms(r,t,e,i){let s=t.querySelectorAll(r);if(s.length){let o=e.querySelectorAll(r);for(let n=0;n<s.length;n++)i(s[n],o[n])}}var Mr=0;function $s(r,t){t.type!=="file"&&(t.value=r.value),t.type==="radio"&&t.name&&(t.name=`mat-clone-${t.name}-${Mr++}`)}function zs(r,t){let e=t.getContext("2d");if(e)try{e.drawImage(r,0,0)}catch{}}function gi(r){let t=r.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}function li(r,t,e){let{top:i,bottom:s,left:o,right:n}=r;return e>=i&&e<=s&&t>=o&&t<=n}function $r(r,t){let e=t.left<r.left,i=t.left+t.width>r.right,s=t.top<r.top,o=t.top+t.height>r.bottom;return e||i||s||o}function Yt(r,t,e){r.top+=t,r.bottom=r.top+r.height,r.left+=e,r.right=r.left+r.width}function Ls(r,t,e,i){let{top:s,right:o,bottom:n,left:a,width:l,height:h}=r,c=l*t,p=h*t;return i>s-p&&i<n+p&&e>a-c&&e<o+c}var xe=class{_document;positions=new Map;constructor(t){this._document=t}clear(){this.positions.clear()}cache(t){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),t.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:gi(e)})})}handleScroll(t){let e=pt(t),i=this.positions.get(e);if(!i)return null;let s=i.scrollPosition,o,n;if(e===this._document){let h=this.getViewportScrollPosition();o=h.top,n=h.left}else o=e.scrollTop,n=e.scrollLeft;let a=s.top-o,l=s.left-n;return this.positions.forEach((h,c)=>{h.clientRect&&e!==c&&e.contains(c)&&Yt(h.clientRect,a,l)}),s.top=o,s.left=n,{top:a,left:l}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function js(r,t){let e=r.rootNodes;if(e.length===1&&e[0].nodeType===t.ELEMENT_NODE)return e[0];let i=t.createElement("div");return e.forEach(s=>i.appendChild(s)),i}function mi(r,t,e){for(let i in t)if(t.hasOwnProperty(i)){let s=t[i];s?r.setProperty(i,s,e?.has(i)?"important":""):r.removeProperty(i)}return r}function St(r,t){let e=t?"":"none";mi(r.style,{"touch-action":t?"":"none","-webkit-user-drag":t?"":"none","-webkit-tap-highlight-color":t?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function Fs(r,t,e){mi(r.style,{position:t?"":"fixed",top:t?"":"0",opacity:t?"":"0",left:t?"":"-999em"},e)}function Se(r,t){return t&&t!="none"?r+" "+t:r}function Ns(r,t){r.style.width=`${t.width}px`,r.style.height=`${t.height}px`,r.style.transform=jt(t.left,t.top)}function jt(r,t){return`translate3d(${Math.round(r)}px, ${Math.round(t)}px, 0)`}function Bs(r){let t=r.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(r)*t}function zr(r){let t=getComputedStyle(r),e=ni(t,"transition-property"),i=e.find(a=>a==="transform"||a==="all");if(!i)return 0;let s=e.indexOf(i),o=ni(t,"transition-duration"),n=ni(t,"transition-delay");return Bs(o[s])+Bs(n[s])}function ni(r,t){return r.getPropertyValue(t).split(",").map(i=>i.trim())}var Lr=new Set(["position"]),hi=class{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(t,e,i,s,o,n,a,l,h,c){this._document=t,this._rootElement=e,this._direction=i,this._initialDomRect=s,this._previewTemplate=o,this._previewClass=n,this._pickupPositionOnPage=a,this._initialTransform=l,this._zIndex=h,this._renderer=c}attach(t){this._preview=this._createPreview(),t.appendChild(this._preview),As(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(t){this._preview.style.transform=t}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(t){this._preview.classList.add(t)}getTransitionDuration(){return zr(this._preview)}addEventListener(t,e){return this._renderer.listen(this._preview,t,e)}_createPreview(){let t=this._previewTemplate,e=this._previewClass,i=t?t.template:null,s;if(i&&t){let o=t.matchSize?this._initialDomRect:null,n=t.viewContainer.createEmbeddedView(i,t.context);n.detectChanges(),s=js(n,this._document),this._previewEmbeddedView=n,t.matchSize?Ns(s,o):s.style.transform=jt(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else s=Ys(this._rootElement),Ns(s,this._initialDomRect),this._initialTransform&&(s.style.transform=this._initialTransform);return mi(s.style,{"pointer-events":"none",margin:As(s)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},Lr),St(s,!1),s.classList.add("cdk-drag-preview"),s.setAttribute("popover","manual"),s.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(o=>s.classList.add(o)):s.classList.add(e)),s}};function As(r){return"showPopover"in r}var Fr={passive:!0},Hs={passive:!1},Nr={passive:!1,capture:!0},Br=800,Vs=new Set(["position"]),ci=class{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_anchor;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=K(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new u;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=J.EMPTY;_pointerUpSubscription=J.EMPTY;_scrollSubscription=J.EMPTY;_resizeSubscription=J.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(t){t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(e=>St(e,t)))}_disabled=!1;beforeStarted=new u;started=new u;released=new u;ended=new u;entered=new u;exited=new u;dropped=new u;moved=this._moveEvents;data;constrainPosition;constructor(t,e,i,s,o,n,a){this._config=e,this._document=i,this._ngZone=s,this._viewportRuler=o,this._dragDropRegistry=n,this._renderer=a,this.withRootElement(t).withParent(e.parentDragRef||null),this._parentPositions=new xe(i),n.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(t){this._handles=t.map(i=>it(i)),this._handles.forEach(i=>St(i,this.disabled)),this._toggleNativeDragInteractions();let e=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&e.add(i)}),this._disabledHandles=e,this}withPreviewTemplate(t){return this._previewTemplate=t,this}withPlaceholderTemplate(t){return this._placeholderTemplate=t,this}withRootElement(t){let e=it(t);if(e!==this._rootElement){this._removeRootElementListeners();let i=this._renderer;this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[i.listen(e,"mousedown",this._pointerDown,Hs),i.listen(e,"touchstart",this._pointerDown,Fr),i.listen(e,"dragstart",this._nativeDragStart,Hs)]),this._initialTransform=void 0,this._rootElement=e}return typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(t){return this._boundaryElement=t?it(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(t){return this._parentDragRef=t,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}resetToBoundary(){if(this._boundaryElement&&this._rootElement&&$r(this._boundaryElement.getBoundingClientRect(),this._rootElement.getBoundingClientRect())){let t=this._boundaryElement.getBoundingClientRect(),e=this._rootElement.getBoundingClientRect(),i=0,s=0;e.left<t.left?i=t.left-e.left:e.right>t.right&&(i=t.right-e.right),e.top<t.top?s=t.top-e.top:e.bottom>t.bottom&&(s=t.bottom-e.bottom);let o=this._activeTransform.x,n=this._activeTransform.y,a=o+i,l=n+s;this._rootElement.style.transform=jt(a,l),this._activeTransform={x:a,y:l},this._passiveTransform={x:a,y:l}}}disableHandle(t){!this._disabledHandles.has(t)&&this._handles.indexOf(t)>-1&&(this._disabledHandles.add(t),St(t,!0))}enableHandle(t){this._disabledHandles.has(t)&&(this._disabledHandles.delete(t),St(t,this.disabled))}withDirection(t){return this._direction=t,this}_withDropContainer(t){this._dropContainer=t}getFreeDragPosition(){let t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}setFreeDragPosition(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}withPreviewContainer(t){return this._previewContainer=t,this}_sortFromLastPointerPosition(){let t=this._lastKnownPointerPosition;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_pointerDown=t=>{if(this.beforeStarted.next(),this._handles.length){let e=this._getTargetHandle(t);e&&!this._disabledHandles.has(e)&&!this.disabled&&this._initializeDragSequence(e,t)}else this.disabled||this._initializeDragSequence(this._rootElement,t)};_pointerMove=t=>{let e=this._getPointerPositionOnPage(t);if(!this._hasStartedDragging()){let s=Math.abs(e.x-this._pickupPositionOnPage.x),o=Math.abs(e.y-this._pickupPositionOnPage.y);if(s+o>=this._config.dragStartThreshold){let a=Date.now()>=this._dragStartTime+this._getDragStartDelay(t),l=this._dropContainer;if(!a){this._endDragSequence(t);return}(!l||!l.isDragging()&&!l.isReceiving())&&(t.cancelable&&t.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(t)))}return}t.cancelable&&t.preventDefault();let i=this._getConstrainedPointerPosition(e);if(this._hasMoved=!0,this._lastKnownPointerPosition=e,this._updatePointerDirectionDelta(i),this._dropContainer)this._updateActiveDropContainer(i,e);else{let s=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,o=this._activeTransform;o.x=i.x-s.x+this._passiveTransform.x,o.y=i.y-s.y+this._passiveTransform.y,this._applyRootElementTransform(o.x,o.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:i,event:t,distance:this._getDragDistance(i),delta:this._pointerDirectionDelta})})};_pointerUp=t=>{this._endDragSequence(t)};_endDragSequence(t){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:t}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(t),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let e=this._getPointerPositionOnPage(t);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e,event:t})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(t){Gt(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let e=this._getShadowRoot(),i=this._dropContainer;if(e&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=this._renderer.listen(e,"selectstart",Ar,Nr)}),i){let s=this._rootElement,o=s.parentNode,n=this._placeholder=this._createPlaceholderElement(),a=this._anchor=this._anchor||this._document.createComment("");o.insertBefore(a,s),this._initialTransform=s.style.transform||"",this._preview=new hi(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(o,e)),Fs(s,!1,Vs),this._document.body.appendChild(o.replaceChild(n,s)),this.started.next({source:this,event:t}),i.start(),this._initialContainer=i,this._initialIndex=i.getItemIndex(this)}else this.started.next({source:this,event:t}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(i?i.getScrollableParents():[])}_initializeDragSequence(t,e){this._parentDragRef&&e.stopPropagation();let i=this.isDragging(),s=Gt(e),o=!s&&e.button!==0,n=this._rootElement,a=pt(e),l=!s&&this._lastTouchEventTime&&this._lastTouchEventTime+Br>Date.now(),h=s?Os(e):Ts(e);if(a&&a.draggable&&e.type==="mousedown"&&e.preventDefault(),i||o||l||h)return;if(this._handles.length){let f=n.style;this._rootElementTapHighlight=f.webkitTapHighlightColor||"",f.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(f=>this._updateOnScroll(f)),this._boundaryElement&&(this._boundaryRect=gi(this._boundaryElement));let c=this._previewTemplate;this._pickupPositionInElement=c&&c.template&&!c.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,t,e);let p=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:p.x,y:p.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(t){Fs(this._rootElement,!0,Vs),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let e=this._dropContainer,i=e.getItemIndex(this),s=this._getPointerPositionOnPage(t),o=this._getDragDistance(s),n=e._isOverContainer(s.x,s.y);this.ended.next({source:this,distance:o,dropPoint:s,event:t}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:n,distance:o,dropPoint:s,event:t}),e.drop(this,i,this._initialIndex,this._initialContainer,n,o,s,t),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:t,y:e},{x:i,y:s}){let o=this._initialContainer._getSiblingContainerFromPosition(this,t,e);!o&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,e)&&(o=this._initialContainer),o&&o!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=o,this._dropContainer.enter(this,t,e,o===this._initialContainer&&o.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:o,currentIndex:o.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,s),this._dropContainer._sortItem(this,t,e,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(t,e):this._applyPreviewTransform(t-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let t=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(t.left,t.top);let e=this._preview.getTransitionDuration();return e===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{let s=a=>{(!a||this._preview&&pt(a)===this._preview.element&&a.propertyName==="transform")&&(n(),i(),clearTimeout(o))},o=setTimeout(s,e*1.5),n=this._preview.addEventListener("transitionend",s)}))}_createPlaceholderElement(){let t=this._placeholderTemplate,e=t?t.template:null,i;return e?(this._placeholderRef=t.viewContainer.createEmbeddedView(e,t.context),this._placeholderRef.detectChanges(),i=js(this._placeholderRef,this._document)):i=Ys(this._rootElement),i.style.pointerEvents="none",i.classList.add("cdk-drag-placeholder"),i}_getPointerPositionInElement(t,e,i){let s=e===this._rootElement?null:e,o=s?s.getBoundingClientRect():t,n=Gt(i)?i.targetTouches[0]:i,a=this._getViewportScrollPosition(),l=n.pageX-o.left-a.left,h=n.pageY-o.top-a.top;return{x:o.left-t.left+l,y:o.top-t.top+h}}_getPointerPositionOnPage(t){let e=this._getViewportScrollPosition(),i=Gt(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,s=i.pageX-e.left,o=i.pageY-e.top;if(this._ownerSVGElement){let n=this._ownerSVGElement.getScreenCTM();if(n){let a=this._ownerSVGElement.createSVGPoint();return a.x=s,a.y=o,a.matrixTransform(n.inverse())}}return{x:s,y:o}}_getConstrainedPointerPosition(t){let e=this._dropContainer?this._dropContainer.lockAxis:null,{x:i,y:s}=this.constrainPosition?this.constrainPosition(t,this,this._initialDomRect,this._pickupPositionInElement):t;if(this.lockAxis==="x"||e==="x"?s=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||e==="y")&&(i=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:o,y:n}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,a=this._boundaryRect,{width:l,height:h}=this._getPreviewRect(),c=a.top+n,p=a.bottom-(h-n),f=a.left+o,S=a.right-(l-o);i=Ws(i,f,S),s=Ws(s,c,p)}return{x:i,y:s}}_updatePointerDirectionDelta(t){let{x:e,y:i}=t,s=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,n=Math.abs(e-o.x),a=Math.abs(i-o.y);return n>this._config.pointerDirectionChangeThreshold&&(s.x=e>o.x?1:-1,o.x=e),a>this._config.pointerDirectionChangeThreshold&&(s.y=i>o.y?1:-1,o.y=i),s}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,St(this._rootElement,t))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(t=>t()),this._rootElementCleanups=void 0}_applyRootElementTransform(t,e){let i=1/this.scale,s=jt(t*i,e*i),o=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=o.transform&&o.transform!="none"?o.transform:""),o.transform=Se(s,this._initialTransform)}_applyPreviewTransform(t,e){let i=this._previewTemplate?.template?void 0:this._initialTransform,s=jt(t,e);this._preview.setTransform(Se(s,i))}_getDragDistance(t){let e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:t,y:e}=this._passiveTransform;if(t===0&&e===0||this.isDragging()||!this._boundaryElement)return;let i=this._rootElement.getBoundingClientRect(),s=this._boundaryElement.getBoundingClientRect();if(s.width===0&&s.height===0||i.width===0&&i.height===0)return;let o=s.left-i.left,n=i.right-s.right,a=s.top-i.top,l=i.bottom-s.bottom;s.width>i.width?(o>0&&(t+=o),n>0&&(t-=n)):t=0,s.height>i.height?(a>0&&(e+=a),l>0&&(e-=l)):e=0,(t!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:t})}_getDragStartDelay(t){let e=this.dragStartDelay;return typeof e=="number"?e:Gt(t)?e.touch:e?e.mouse:0}_updateOnScroll(t){let e=this._parentPositions.handleScroll(t);if(e){let i=pt(t);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&Yt(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=he(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(t,e){let i=this._previewContainer||"global";if(i==="parent")return t;if(i==="global"){let s=this._document;return e||s.fullscreenElement||s.webkitFullscreenElement||s.mozFullScreenElement||s.msFullscreenElement||s.body}return it(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=t=>{if(this._handles.length){let e=this._getTargetHandle(t);e&&!this._disabledHandles.has(e)&&!this.disabled&&t.preventDefault()}else this.disabled||t.preventDefault()};_getTargetHandle(t){return this._handles.find(e=>t.target&&(t.target===e||e.contains(t.target)))}};function Ws(r,t,e){return Math.max(t,Math.min(e,r))}function Gt(r){return r.type[0]==="t"}function Ar(r){r.preventDefault()}function Us(r,t,e){let i=Gs(t,r.length-1),s=Gs(e,r.length-1);if(i===s)return;let o=r[i],n=s<i?-1:1;for(let a=i;a!==s;a+=n)r[a]=r[a+n];r[s]=o}function Gs(r,t){return Math.max(0,Math.min(t,r))}var Re=class{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(t){this._dragDropRegistry=t}_previousSwap={drag:null,delta:0,overlaps:!1};start(t){this.withItems(t)}sort(t,e,i,s){let o=this._itemPositions,n=this._getItemIndexFromPointerPosition(t,e,i,s);if(n===-1&&o.length>0)return null;let a=this.orientation==="horizontal",l=o.findIndex(R=>R.drag===t),h=o[n],c=o[l].clientRect,p=h.clientRect,f=l>n?1:-1,S=this._getItemOffsetPx(c,p,f),D=this._getSiblingOffsetPx(l,o,f),E=o.slice();return Us(o,l,n),o.forEach((R,Rt)=>{if(E[Rt]===R)return;let Ut=R.drag===t,Dt=Ut?S:D,_i=Ut?t.getPlaceholderElement():R.drag.getRootElement();R.offset+=Dt;let vi=Math.round(R.offset*(1/R.drag.scale));a?(_i.style.transform=Se(`translate3d(${vi}px, 0, 0)`,R.initialTransform),Yt(R.clientRect,0,Dt)):(_i.style.transform=Se(`translate3d(0, ${vi}px, 0)`,R.initialTransform),Yt(R.clientRect,Dt,0))}),this._previousSwap.overlaps=li(p,e,i),this._previousSwap.drag=h.drag,this._previousSwap.delta=a?s.x:s.y,{previousIndex:l,currentIndex:n}}enter(t,e,i,s){let o=s==null||s<0?this._getItemIndexFromPointerPosition(t,e,i):s,n=this._activeDraggables,a=n.indexOf(t),l=t.getPlaceholderElement(),h=n[o];if(h===t&&(h=n[o+1]),!h&&(o==null||o===-1||o<n.length-1)&&this._shouldEnterAsFirstChild(e,i)&&(h=n[0]),a>-1&&n.splice(a,1),h&&!this._dragDropRegistry.isDragging(h)){let c=h.getRootElement();c.parentElement.insertBefore(l,c),n.splice(o,0,t)}else this._element.appendChild(l),n.push(t);l.style.transform="",this._cacheItemPositions()}withItems(t){this._activeDraggables=t.slice(),this._cacheItemPositions()}withSortPredicate(t){this._sortPredicate=t}reset(){this._activeDraggables?.forEach(t=>{let e=t.getRootElement();if(e){let i=this._itemPositions.find(s=>s.drag===t)?.initialTransform;e.style.transform=i||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(t){return(this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions).findIndex(i=>i.drag===t)}updateOnScroll(t,e){this._itemPositions.forEach(({clientRect:i})=>{Yt(i,t,e)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}withElementContainer(t){this._element=t}_cacheItemPositions(){let t=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(e=>{let i=e.getVisibleElement();return{drag:e,offset:0,initialTransform:i.style.transform||"",clientRect:gi(i)}}).sort((e,i)=>t?e.clientRect.left-i.clientRect.left:e.clientRect.top-i.clientRect.top)}_getItemOffsetPx(t,e,i){let s=this.orientation==="horizontal",o=s?e.left-t.left:e.top-t.top;return i===-1&&(o+=s?e.width-t.width:e.height-t.height),o}_getSiblingOffsetPx(t,e,i){let s=this.orientation==="horizontal",o=e[t].clientRect,n=e[t+i*-1],a=o[s?"width":"height"]*i;if(n){let l=s?"left":"top",h=s?"right":"bottom";i===-1?a-=n.clientRect[l]-o[h]:a+=o[l]-n.clientRect[h]}return a}_shouldEnterAsFirstChild(t,e){if(!this._activeDraggables.length)return!1;let i=this._itemPositions,s=this.orientation==="horizontal";if(i[0].drag!==this._activeDraggables[0]){let n=i[i.length-1].clientRect;return s?t>=n.right:e>=n.bottom}else{let n=i[0].clientRect;return s?t<=n.left:e<=n.top}}_getItemIndexFromPointerPosition(t,e,i,s){let o=this.orientation==="horizontal",n=this._itemPositions.findIndex(({drag:a,clientRect:l})=>{if(a===t)return!1;if(s){let h=o?s.x:s.y;if(a===this._previousSwap.drag&&this._previousSwap.overlaps&&h===this._previousSwap.delta)return!1}return o?e>=Math.floor(l.left)&&e<Math.floor(l.right):i>=Math.floor(l.top)&&i<Math.floor(l.bottom)});return n===-1||!this._sortPredicate(n,t)?-1:n}},di=class{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(t,e){this._document=t,this._dragDropRegistry=e}start(t){let e=this._element.childNodes;this._relatedNodes=[];for(let i=0;i<e.length;i++){let s=e[i];this._relatedNodes.push([s,s.nextSibling])}this.withItems(t)}sort(t,e,i,s){let o=this._getItemIndexFromPointerPosition(t,e,i),n=this._previousSwap;if(o===-1||this._activeItems[o]===t)return null;let a=this._activeItems[o];if(n.drag===a&&n.overlaps&&n.deltaX===s.x&&n.deltaY===s.y)return null;let l=this.getItemIndex(t),h=t.getPlaceholderElement(),c=a.getRootElement();o>l?c.after(h):c.before(h),Us(this._activeItems,l,o);let p=this._getRootNode().elementFromPoint(e,i);return n.deltaX=s.x,n.deltaY=s.y,n.drag=a,n.overlaps=c===p||c.contains(p),{previousIndex:l,currentIndex:o}}enter(t,e,i,s){let o=s==null||s<0?this._getItemIndexFromPointerPosition(t,e,i):s;o===-1&&(o=this._getClosestItemIndexToPointer(t,e,i));let n=this._activeItems[o],a=this._activeItems.indexOf(t);a>-1&&this._activeItems.splice(a,1),n&&!this._dragDropRegistry.isDragging(n)?(this._activeItems.splice(o,0,t),n.getRootElement().before(t.getPlaceholderElement())):(this._activeItems.push(t),this._element.appendChild(t.getPlaceholderElement()))}withItems(t){this._activeItems=t.slice()}withSortPredicate(t){this._sortPredicate=t}reset(){let t=this._element,e=this._previousSwap;for(let i=this._relatedNodes.length-1;i>-1;i--){let[s,o]=this._relatedNodes[i];s.parentNode===t&&s.nextSibling!==o&&(o===null?t.appendChild(s):o.parentNode===t&&t.insertBefore(s,o))}this._relatedNodes=[],this._activeItems=[],e.drag=null,e.deltaX=e.deltaY=0,e.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(t){return this._activeItems.indexOf(t)}updateOnScroll(){this._activeItems.forEach(t=>{this._dragDropRegistry.isDragging(t)&&t._sortFromLastPointerPosition()})}withElementContainer(t){t!==this._element&&(this._element=t,this._rootNode=void 0)}_getItemIndexFromPointerPosition(t,e,i){let s=this._getRootNode().elementFromPoint(Math.floor(e),Math.floor(i)),o=s?this._activeItems.findIndex(n=>{let a=n.getRootElement();return s===a||a.contains(s)}):-1;return o===-1||!this._sortPredicate(o,t)?-1:o}_getRootNode(){return this._rootNode||(this._rootNode=he(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(t,e,i){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let s=1/0,o=-1;for(let n=0;n<this._activeItems.length;n++){let a=this._activeItems[n];if(a!==t){let{x:l,y:h}=a.getRootElement().getBoundingClientRect(),c=Math.hypot(e-l,i-h);c<s&&(s=c,o=n)}}return o}},Xs=.05,Zs=.05,U=function(r){return r[r.NONE=0]="NONE",r[r.UP=1]="UP",r[r.DOWN=2]="DOWN",r}(U||{}),B=function(r){return r[r.NONE=0]="NONE",r[r.LEFT=1]="LEFT",r[r.RIGHT=2]="RIGHT",r}(B||{}),pi=class{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis;autoScrollDisabled=!1;autoScrollStep=2;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new u;entered=new u;exited=new u;dropped=new u;sorted=new u;receivingStarted=new u;receivingStopped=new u;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=J.EMPTY;_verticalScrollDirection=U.NONE;_horizontalScrollDirection=B.NONE;_scrollNode;_stopScrollTimers=new u;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(t,e,i,s,o){this._dragDropRegistry=e,this._ngZone=s,this._viewportRuler=o;let n=this.element=it(t);this._document=i,this.withOrientation("vertical").withElementContainer(n),e.registerDropContainer(this),this._parentPositions=new xe(i)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(t,e,i,s){this._draggingStarted(),s==null&&this.sortingDisabled&&(s=this._draggables.indexOf(t)),this._sortStrategy.enter(t,e,i,s),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}exit(t){this._reset(),this.exited.next({item:t,container:this})}drop(t,e,i,s,o,n,a,l={}){this._reset(),this.dropped.next({item:t,currentIndex:e,previousIndex:i,container:this,previousContainer:s,isPointerOverContainer:o,distance:n,dropPoint:a,event:l})}withItems(t){let e=this._draggables;return this._draggables=t,t.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(e.filter(s=>s.isDragging()).every(s=>t.indexOf(s)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(t){return this._direction=t,this._sortStrategy instanceof Re&&(this._sortStrategy.direction=t),this}connectedTo(t){return this._siblings=t.slice(),this}withOrientation(t){if(t==="mixed")this._sortStrategy=new di(this._document,this._dragDropRegistry);else{let e=new Re(this._dragDropRegistry);e.direction=this._direction,e.orientation=t,this._sortStrategy=e}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((e,i)=>this.sortPredicate(e,i,this)),this}withScrollableParents(t){let e=this._container;return this._scrollableElements=t.indexOf(e)===-1?[e,...t]:t.slice(),this}withElementContainer(t){if(t===this._container)return this;let e=it(this.element),i=this._scrollableElements.indexOf(this._container),s=this._scrollableElements.indexOf(t);return i>-1&&this._scrollableElements.splice(i,1),s>-1&&this._scrollableElements.splice(s,1),this._sortStrategy&&this._sortStrategy.withElementContainer(t),this._cachedShadowRoot=null,this._scrollableElements.unshift(t),this._container=t,this}getScrollableParents(){return this._scrollableElements}getItemIndex(t){return this._isDragging?this._sortStrategy.getItemIndex(t):this._draggables.indexOf(t)}isReceiving(){return this._activeSiblings.size>0}_sortItem(t,e,i,s){if(this.sortingDisabled||!this._domRect||!Ls(this._domRect,Xs,e,i))return;let o=this._sortStrategy.sort(t,e,i,s);o&&this.sorted.next({previousIndex:o.previousIndex,currentIndex:o.currentIndex,container:this,item:t})}_startScrollingIfNecessary(t,e){if(this.autoScrollDisabled)return;let i,s=U.NONE,o=B.NONE;if(this._parentPositions.positions.forEach((n,a)=>{a===this._document||!n.clientRect||i||Ls(n.clientRect,Xs,t,e)&&([s,o]=Hr(a,n.clientRect,this._direction,t,e),(s||o)&&(i=a))}),!s&&!o){let{width:n,height:a}=this._viewportRuler.getViewportSize(),l={width:n,height:a,top:0,right:n,bottom:a,left:0};s=qs(l,e),o=Ks(l,t),i=window}i&&(s!==this._verticalScrollDirection||o!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=s,this._horizontalScrollDirection=o,this._scrollNode=i,(s||o)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let t=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||"",t.scrollSnapType=t.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let t=this._container.style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(e=>e._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),xi(0,De).pipe(nt(this._stopScrollTimers)).subscribe(()=>{let t=this._scrollNode,e=this.autoScrollStep;this._verticalScrollDirection===U.UP?t.scrollBy(0,-e):this._verticalScrollDirection===U.DOWN&&t.scrollBy(0,e),this._horizontalScrollDirection===B.LEFT?t.scrollBy(-e,0):this._horizontalScrollDirection===B.RIGHT&&t.scrollBy(e,0)})};_isOverContainer(t,e){return this._domRect!=null&&li(this._domRect,t,e)}_getSiblingContainerFromPosition(t,e,i){return this._siblings.find(s=>s._canReceive(t,e,i))}_canReceive(t,e,i){if(!this._domRect||!li(this._domRect,e,i)||!this.enterPredicate(t,this))return!1;let s=this._getShadowRoot().elementFromPoint(e,i);return s?s===this._container||this._container.contains(s):!1}_startReceiving(t,e){let i=this._activeSiblings;!i.has(t)&&e.every(s=>this.enterPredicate(s,this)||this._draggables.indexOf(s)>-1)&&(i.add(t),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:t,receiver:this,items:e}))}_stopReceiving(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:t,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(t=>{if(this.isDragging()){let e=this._parentPositions.handleScroll(t);e&&this._sortStrategy.updateOnScroll(e.top,e.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let t=he(this._container);this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let t=this._sortStrategy.getActiveItemsSnapshot().filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,t))}};function qs(r,t){let{top:e,bottom:i,height:s}=r,o=s*Zs;return t>=e-o&&t<=e+o?U.UP:t>=i-o&&t<=i+o?U.DOWN:U.NONE}function Ks(r,t){let{left:e,right:i,width:s}=r,o=s*Zs;return t>=e-o&&t<=e+o?B.LEFT:t>=i-o&&t<=i+o?B.RIGHT:B.NONE}function Hr(r,t,e,i,s){let o=qs(t,s),n=Ks(t,i),a=U.NONE,l=B.NONE;if(o){let h=r.scrollTop;o===U.UP?h>0&&(a=U.UP):r.scrollHeight-h>r.clientHeight&&(a=U.DOWN)}if(n){let h=r.scrollLeft;e==="rtl"?n===B.RIGHT?h<0&&(l=B.RIGHT):r.scrollWidth+h>r.clientWidth&&(l=B.LEFT):n===B.LEFT?h>0&&(l=B.LEFT):r.scrollWidth-h>r.clientWidth&&(l=B.RIGHT)}return[a,l]}var Xt={capture:!0},ai={passive:!1,capture:!0},Vr=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275cmp=k({type:r,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(i,s){},styles:[`@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}
`],encapsulation:2,changeDetection:0})}return r})(),fi=(()=>{class r{_ngZone=d(M);_document=d(A);_styleLoader=d(At);_renderer=d(Q).createRenderer(null,null);_cleanupDocumentTouchmove;_scroll=new u;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=K([]);_globalListeners;_draggingPredicate=e=>e.isDragging();_domNodesToDirectives=null;pointerMove=new u;pointerUp=new u;constructor(){}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=this._renderer.listen(this._document,"touchmove",this._persistentTouchmoveListener,ai)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),this._dragInstances.size===0&&this._cleanupDocumentTouchmove?.()}startDragging(e,i){if(!(this._activeDragInstances().indexOf(e)>-1)&&(this._styleLoader.load(Vr),this._activeDragInstances.update(s=>[...s,e]),this._activeDragInstances().length===1)){let s=i.type.startsWith("touch"),o=a=>this.pointerUp.next(a),n=[["scroll",a=>this._scroll.next(a),Xt],["selectstart",this._preventDefaultWhileDragging,ai]];s?n.push(["touchend",o,Xt],["touchcancel",o,Xt]):n.push(["mouseup",o,Xt]),s||n.push(["mousemove",a=>this.pointerMove.next(a),ai]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=n.map(([a,l,h])=>this._renderer.listen(this._document,a,l,h))})}}stopDragging(e){this._activeDragInstances.update(i=>{let s=i.indexOf(e);return s>-1?(i.splice(s,1),[...i]):i}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(e){return this._activeDragInstances().indexOf(e)>-1}scrolled(e){let i=[this._scroll];return e&&e!==this._document&&i.push(new It(s=>this._ngZone.runOutsideAngular(()=>{let o=this._renderer.listen(e,"scroll",n=>{this._activeDragInstances().length&&s.next(n)},Xt);return()=>{o()}}))),Ie(...i)}registerDirectiveNode(e,i){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(e,i)}removeDirectiveNode(e){this._domNodesToDirectives?.delete(e)}getDragDirectiveForNode(e){return this._domNodesToDirectives?.get(e)||null}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=e=>{this._activeDragInstances().length>0&&e.preventDefault()};_persistentTouchmoveListener=e=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&e.preventDefault(),this.pointerMove.next(e))};_clearGlobalListeners(){this._globalListeners?.forEach(e=>e()),this._globalListeners=void 0}static \u0275fac=function(i){return new(i||r)};static \u0275prov=w({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Wr={dragStartThreshold:5,pointerDirectionChangeThreshold:5},Gr=(()=>{class r{_document=d(A);_ngZone=d(M);_viewportRuler=d(vt);_dragDropRegistry=d(fi);_renderer=d(Q).createRenderer(null,null);constructor(){}createDrag(e,i=Wr){return new ci(e,i,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(e){return new pi(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(i){return new(i||r)};static \u0275prov=w({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),ui=new Z("CDK_DRAG_PARENT");var Js=new Z("CdkDragHandle"),Qs=(()=>{class r{element=d(L);_parentDrag=d(ui,{optional:!0,skipSelf:!0});_dragDropRegistry=d(fi);_stateChanges=new u;get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._stateChanges.next(this)}_disabled=!1;constructor(){this._parentDrag?._addHandle(this)}ngAfterViewInit(){if(!this._parentDrag){let e=this.element.nativeElement.parentElement;for(;e;){let i=this._dragDropRegistry.getDragDirectiveForNode(e);if(i){this._parentDrag=i,i._addHandle(this);break}e=e.parentElement}}}ngOnDestroy(){this._parentDrag?._removeHandle(this),this._stateChanges.complete()}static \u0275fac=function(i){return new(i||r)};static \u0275dir=kt({type:r,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:[2,"cdkDragHandleDisabled","disabled",Ot]},features:[ie([{provide:Js,useExisting:r}])]})}return r})(),Xr=new Z("CDK_DRAG_CONFIG"),Yr=new Z("CdkDropList"),tr=(()=>{class r{element=d(L);dropContainer=d(Yr,{optional:!0,skipSelf:!0});_ngZone=d(M);_viewContainerRef=d(Et);_dir=d(de,{optional:!0});_changeDetectorRef=d(Tt);_selfHandle=d(Js,{optional:!0,self:!0});_parentDrag=d(ui,{optional:!0,skipSelf:!0});_dragDropRegistry=d(fi);_destroyed=new u;_handles=new yi([]);_previewTemplate;_placeholderTemplate;_dragRef;data;lockAxis;rootElementSelector;boundaryElement;dragStartDelay;freeDragPosition;get disabled(){return this._disabled||!!(this.dropContainer&&this.dropContainer.disabled)}set disabled(e){this._disabled=e,this._dragRef.disabled=this._disabled}_disabled;constrainPosition;previewClass;previewContainer;scale=1;started=new I;released=new I;ended=new I;entered=new I;exited=new I;dropped=new I;moved=new It(e=>{let i=this._dragRef.moved.pipe(Ci(s=>({source:this,pointerPosition:s.pointerPosition,event:s.event,delta:s.delta,distance:s.distance}))).subscribe(e);return()=>{i.unsubscribe()}});_injector=d(q);constructor(){let e=this.dropContainer,i=d(Xr,{optional:!0}),s=d(Gr);this._dragRef=s.createDrag(this.element,{dragStartThreshold:i&&i.dragStartThreshold!=null?i.dragStartThreshold:5,pointerDirectionChangeThreshold:i&&i.pointerDirectionChangeThreshold!=null?i.pointerDirectionChangeThreshold:5,zIndex:i?.zIndex}),this._dragRef.data=this,this._dragDropRegistry.registerDirectiveNode(this.element.nativeElement,this),i&&this._assignDefaults(i),e&&(this._dragRef._withDropContainer(e._dropListRef),e.addItem(this),e._dropListRef.beforeStarted.pipe(nt(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}resetToBoundary(){this._dragRef.resetToBoundary()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(e){this._dragRef.setFreeDragPosition(e)}ngAfterViewInit(){Ct(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(e){let i=e.rootElementSelector,s=e.freeDragPosition;i&&!i.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,s&&!s.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._dragDropRegistry.removeDirectiveNode(this.element.nativeElement),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(e){let i=this._handles.getValue();i.push(e),this._handles.next(i)}_removeHandle(e){let i=this._handles.getValue(),s=i.indexOf(e);s>-1&&(i.splice(s,1),this._handles.next(i))}_setPreviewTemplate(e){this._previewTemplate=e}_resetPreviewTemplate(e){e===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(e){this._placeholderTemplate=e}_resetPlaceholderTemplate(e){e===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let e=this.element.nativeElement,i=e;this.rootElementSelector&&(i=e.closest!==void 0?e.closest(this.rootElementSelector):e.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(i||e)}_getBoundaryElement(){let e=this.boundaryElement;return e?typeof e=="string"?this.element.nativeElement.closest(e):it(e):null}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){let i=this._dir,s=this.dragStartDelay,o=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,n=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.scale=this.scale,e.dragStartDelay=typeof s=="object"&&s?s:Je(s),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(o).withPreviewTemplate(n).withPreviewContainer(this.previewContainer||"global"),i&&e.withDirection(i.value)}}),e.beforeStarted.pipe(Di(1)).subscribe(()=>{if(this._parentDrag){e.withParent(this._parentDrag._dragRef);return}let i=this.element.nativeElement.parentElement;for(;i;){let s=this._dragDropRegistry.getDragDirectiveForNode(i);if(s){e.withParent(s._dragRef);break}i=i.parentElement}})}_handleEvents(e){e.started.subscribe(i=>{this.started.emit({source:this,event:i.event}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(i=>{this.released.emit({source:this,event:i.event})}),e.ended.subscribe(i=>{this.ended.emit({source:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(i=>{this.entered.emit({container:i.container.data,item:this,currentIndex:i.currentIndex})}),e.exited.subscribe(i=>{this.exited.emit({container:i.container.data,item:this})}),e.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,isPointerOverContainer:i.isPointerOverContainer,item:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event})})}_assignDefaults(e){let{lockAxis:i,dragStartDelay:s,constrainPosition:o,previewClass:n,boundaryElement:a,draggingDisabled:l,rootElementSelector:h,previewContainer:c}=e;this.disabled=l??!1,this.dragStartDelay=s||0,i&&(this.lockAxis=i),o&&(this.constrainPosition=o),n&&(this.previewClass=n),a&&(this.boundaryElement=a),h&&(this.rootElementSelector=h),c&&(this.previewContainer=c)}_setupHandlesListener(){this._handles.pipe(Ii(e=>{let i=e.map(s=>s.element);this._selfHandle&&this.rootElementSelector&&i.push(this.element),this._dragRef.withHandles(i)}),Pt(e=>Ie(...e.map(i=>i._stateChanges.pipe(Ee(i))))),nt(this._destroyed)).subscribe(e=>{let i=this._dragRef,s=e.element.nativeElement;e.disabled?i.disableHandle(s):i.enableHandle(s)})}static \u0275fac=function(i){return new(i||r)};static \u0275dir=kt({type:r,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(i,s){i&2&&Me("cdk-drag-disabled",s.disabled)("cdk-drag-dragging",s._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",Ot],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",Ni]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[ie([{provide:ui,useExisting:r}]),ut]})}return r})();var er=(()=>{class r{config={title:"",content:""};close=new I;onClose(){this.close.emit()}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=k({type:r,selectors:[["modal"]],inputs:{config:"config"},outputs:{close:"close"},decls:8,vars:2,consts:[["cdkDrag","",1,"dialog"],["cdkDragHandle","",1,"dialog__header"],["src","assets/icons/move.svg","alt","Move","width","24","height","24"],[1,"dialog__title"],[1,"dialog__close",3,"click"],["src","assets/icons/close.svg","alt","Close","width","24","height","24"],[1,"dialog__content",3,"innerHTML"]],template:function(i,s){i&1&&(v(0,"div",0)(1,"div",1),$(2,"img",2),v(3,"div",3),rt(4),_(),v(5,"div",4),T("click",function(){return s.onClose()}),$(6,"img",5),_()(),$(7,"div",6),_()),i&2&&(y(4),xt(" ",s.config.title," "),y(3),H("innerHTML",s.config.content,Mi))},dependencies:[tr,Qs],styles:[".dialog[_ngcontent-%COMP%]{margin-inline:15%;border:1px solid #E0E0E0;display:flex;flex-direction:column;justify-content:center;align-items:center;background:#fff;border-radius:4px;transition:box-shadow .2s cubic-bezier(0,0,.2,1);box-shadow:0 3px 1px -2px #0003,0 2px 2px #00000024,0 1px 5px #0000001f}.dialog[_ngcontent-%COMP%]:active{box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.dialog__header[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;cursor:move;border-bottom:1px solid #E0E0E0;width:100%;background-color:#f8f9fa;gap:8px;box-sizing:border-box;padding:12px;position:relative}.dialog__content[_ngcontent-%COMP%]{cursor:default;pointer-events:none;padding:12px 16px}.dialog__close[_ngcontent-%COMP%]{display:flex;align-items:center;position:absolute;right:8px;cursor:pointer}"]})}return r})();var jr=new Z("MODAL_VIEW_CONTAINER_REF"),ir=(()=>{class r{_globalVcr;constructor(e){this._globalVcr=e}_overlay=d(oi);_overlayRef;ngOnDestroy(){this.close()}close(){this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._overlayRef.dispose())}open(e){this._overlayRef=this._overlay.create({positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),hasBackdrop:!0,backdropClass:"modal-backdrop"});let i=new Vt(er,this._globalVcr),s=this._overlayRef.attach(i);return s.instance.config=e,s.instance.close.subscribe(()=>this.close()),this._overlayRef.backdropClick().subscribe(()=>this.close()),this._overlayRef}static \u0275fac=function(i){return new(i||r)(qt(jr,8))};static \u0275prov=w({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var sr=(()=>{class r{http;apiUrl="http://localhost:3000";constructor(e){this.http=e}getNewGame(e){return this.http.post(`${this.apiUrl}/api/game`,e)}static \u0275fac=function(i){return new(i||r)(qt(Xi))};static \u0275prov=w({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var rr=(r,t,e)=>({control:r,isFirst:t,isLast:e}),qr=(r,t,e)=>({"container__control--first":r,"container__control--last":t,"container__control--disabled":e}),Kr=(r,t)=>t.name;function Jr(r,t){if(r&1&&Oe(0,7),r&2){let e=t.$implicit,i=t.$index,s=t.$count,o=g(),n=ee(13),a=ee(15);H("ngTemplateOutlet",e.type===o.gameControlType.Button?n:a)("ngTemplateOutletContext",se(2,rr,e,i===0,i===s-1))}}function Qr(r,t){if(r&1){let e=N();v(0,"grid",11),T("reloadGrid",function(){b(e);let s=g();return x(s.reloadGrid())}),_()}if(r&2){let e=g();H("config",e.vehiclesConfig())("exitRow",e.exitRow)}}function to(r,t){r&1&&$(0,"loader")}function eo(r,t){if(r&1&&rt(0),r&2){let e=g().control,i=g();Fi(" ",e.name,": ",i.MAP_DIFFICULTY_TO_DESCRIPTION[i.difficulty]," ")}}function io(r,t){if(r&1&&rt(0),r&2){let e=g().control;xt(" ",e.name," ")}}function so(r,t){if(r&1){let e=N();v(0,"button",12),T("click",function(){let s=b(e).control,o=g();return x(o.onControlClick(s))}),G(1,eo,1,2)(2,io,1,1),_()}if(r&2){let e=t.control,i=t.isFirst,s=t.isLast,o=g(),n=o.isLoadingNewGame()&&(e.id===o.gameControlAction.NewGame||e.id===o.gameControlAction.Difficulty);H("disabled",n)("ngClass",se(3,qr,i,s,n)),y(),X(e.id===o.gameControlAction.Difficulty?1:2)}}function ro(r,t){if(r&1){let e=N();v(0,"button",16),T("click",function(){let s=b(e).$implicit,o=g(2).control,n=g();return x(n.onControlOptionClick(o,s))}),rt(1),_()}if(r&2){let e=t.$implicit;y(),Li(e.name)}}function oo(r,t){if(r&1&&(v(0,"div",14),lt(1,ro,2,1,"button",15,Jt),_()),r&2){let e=g().control;y(),ht(e.options)}}function no(r,t){if(r&1&&(v(0,"div",13),Oe(1,7),G(2,oo,3,0,"div",14),_()),r&2){let e=t.control,i=t.isFirst,s=t.isLast,o=g(),n=ee(13);y(),H("ngTemplateOutlet",n)("ngTemplateOutletContext",se(3,rr,e,i,s)),y(),X(o.allowDropdown?2:-1)}}var gl=(()=>{class r{modalService;apiService;storageService;gameControlType=ct;gameControlAction=tt;controls=je();MAP_DIFFICULTY_TO_DESCRIPTION={[et.Easy]:"Easy",[et.Medium]:"Medium",[et.Hard]:"Hard"};difficulty=et.Easy;allowDropdown=!0;exitRow=ae;vehiclesConfig=K([]);isLoadingNewGame=K(!1);constructor(e,i,s){this.modalService=e,this.apiService=i,this.storageService=s,this.controls=je(),this.setGameParamsFromCache()}setGameParamsFromCache(){let e=this.storageService.getItem(le.GameCache);e&&(this.setGameParams(e),this.isLoadingNewGame.set(!1))}openRulesModal(){let e=os();this.modalService.open(e)}setGameParams(e){let i=e.vehicles.map(s=>st(W({},s),{dragging:this.getDraggingDirection(s),color:this.getCarColor(s)}));this.exitRow=e.exitRow,this.vehiclesConfig.set(i)}getDraggingDirection(e){return e.cols>e.rows?ne.Horizontal:ne.Vertical}getCarColor(e){return e.type===Bt.GreenCar?"green":"red"}createNewGame(){this.isLoadingNewGame.set(!0),this.apiService.getNewGame({size:rs,difficulty:this.difficulty}).pipe(Si(e=>{throw this.isLoadingNewGame.set(!1),e})).subscribe(e=>{this.setGameParams(e),this.isLoadingNewGame.set(!1),this.storageService.setItem(le.GameCache,e)})}reloadGrid(){this.isLoadingNewGame()||this.createNewGame()}onControlClick(e){if(e.type===ct.Button)switch(e.id){case tt.NewGame:this.createNewGame();break;case tt.Rules:this.openRulesModal();break}}onMouseOver(){this.allowDropdown=!0}onControlOptionClick(e,i){if(this.allowDropdown=!1,e.id===tt.Difficulty){if(this.difficulty===i.id)return;this.difficulty=i.id,this.createNewGame()}}static \u0275fac=function(i){return new(i||r)(F(ir),F(sr),F(as))};static \u0275cmp=k({type:r,selectors:[["home"]],decls:16,vars:1,consts:[["controlButton",""],["controlDropdownButton",""],[1,"container"],[1,"container__header"],[1,"container__title"],[1,"container__content"],[1,"container__controls"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"container__grid"],[3,"config","exitRow"],[1,"container__footer"],[3,"reloadGrid","config","exitRow"],[1,"container__control",3,"click","disabled","ngClass"],[1,"container__dropdown-wrapper"],[1,"container__menu"],[1,"container__menu-item"],[1,"container__menu-item",3,"click"]],template:function(i,s){i&1&&(v(0,"div",2)(1,"div",3)(2,"span",4),rt(3,"Rush Hour"),_()(),v(4,"div",5)(5,"div",6),lt(6,Jr,1,6,"ng-container",7,Kr),_(),v(8,"div",8),G(9,Qr,1,2,"grid",9)(10,to,1,0,"loader"),_()(),$(11,"div",10),_(),zi(12,so,3,7,"ng-template",null,0,$e)(14,no,3,7,"ng-template",null,1,$e)),i&2&&(y(6),ht(s.controls),y(3),X(s.isLoadingNewGame()?10:9))},dependencies:[Wi,Ai,Vi,ns,ls],styles:[".container[_ngcontent-%COMP%]{border:1px solid #E0E0E0;border-radius:8px;box-shadow:0 4px 8px #0000001a}.container__controls[_ngcontent-%COMP%], .container__header[_ngcontent-%COMP%]{border-top-left-radius:8px;border-top-right-radius:8px}.container__footer[_ngcontent-%COMP%], .container__menu[_ngcontent-%COMP%]{border-bottom-left-radius:8px;border-bottom-right-radius:8px}[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;height:100%;margin:4vh 26vw}.container__header[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:32px}.container__title[_ngcontent-%COMP%]{font-size:36px}.container__content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;height:100%;border-bottom:1px solid #E0E0E0;border-top:1px solid #E0E0E0;padding:32px}.container__controls[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;background-color:#e3ecf5;border:1px solid #E0E0E0;border-bottom:none}.container__control[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:8px;flex:1;background-color:unset;border:none;cursor:pointer;border-inline-start:1px solid #E0E0E0;font:inherit;font-weight:700}.container__control[_ngcontent-%COMP%]:hover{background-color:#b0d5fb}.container__control--first[_ngcontent-%COMP%]{border-inline-start:none}.container__control--first[_ngcontent-%COMP%]:hover{border-start-start-radius:8px}.container__control--last[_ngcontent-%COMP%]:hover{border-start-end-radius:8px}.container__control--disabled[_ngcontent-%COMP%]{cursor:default}.container__control--disabled[_ngcontent-%COMP%]:hover{background-color:unset}.container__menu[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;width:100%;z-index:2;background-color:#fff;border:1px solid #E0E0E0;overflow:hidden;box-shadow:0 4px 8px #0006;box-sizing:border-box;display:none}.container__menu[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{display:block}.container__menu-item[_ngcontent-%COMP%]{display:block;width:100%;padding:8px 16px;border:none;background:none;text-align:center;cursor:pointer;white-space:nowrap}.container__menu-item[_ngcontent-%COMP%]:hover{background-color:#b0d5fb}.container__dropdown-wrapper[_ngcontent-%COMP%]{flex:1;position:relative;display:flex}.container__dropdown-wrapper[_ngcontent-%COMP%]:hover   .container__menu[_ngcontent-%COMP%]{display:block}.container__footer[_ngcontent-%COMP%]{padding:16px;background-color:#f8f9fa}.container__grid[_ngcontent-%COMP%]{flex:1;border:1px solid #E0E0E0;border-top:none}"],changeDetection:0})}return r})();export{gl as HomeComponent};
